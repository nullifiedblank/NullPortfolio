<!DOCTYPE html>
<html lang="en" data-theme="minimal">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI Morphing Showcase</title>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Permanent+Marker&family=Press+Start+2P&family=Patrick+Hand&family=VT323&display=swap" rel="stylesheet">
    
    <style>
        /* =========================================
           1. CORE VARIABLES & RESET
           ========================================= */
        :root {
            /* --- COLORS --- */
            --bg-body: transparent; 
            --bg-layer-color: #ffffff; 
            --bg-card: #f8f9fa;
            --bg-accent: #111827;
            --text-main: #111827;
            --text-muted: #6b7280;
            --text-on-accent: #ffffff;
            
            /* --- TYPOGRAPHY --- */
            --font-main: 'Inter', system-ui, sans-serif;
            --font-display: 'Inter', system-ui, sans-serif;
            --letter-spacing-display: normal;
            --letter-spacing-title: normal;
            --text-transform-vapor: none;
            --text-shadow-chromatic: none;
            
            /* --- SHAPES --- */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-btn: 6px;
            
            --border-width: 1px;
            --border-color: #e5e7eb;
            --border-style: solid;
            
            --shadow-card: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 6px rgba(0,0,0,0.1);
            
            /* --- MORPHING ENGINE VARIABLES --- */
            --layout-gap: 2rem;
            --layout-align: center; 
            --layout-align-items: center; 
            --card-rotation: 0deg;
            --transform-hover: translateY(-2px);
            --grid-columns: repeat(auto-fit, minmax(300px, 1fr));
            --container-max: 1000px;
            
            /* Theme Specific Toggles */
            --overlay-grid: none;
            --overlay-grain: none;
            --overlay-grid-size: 0px; 
            --sun-gradient: none;
            --sun-opacity: 0;
            --sun-size: 0;
            --sun-animation: none;
            --sun-shadow: none;
            --sun-lines-display: none; 
            --sun-lines-mask: none;
            --sun-lines-pattern: none;
            --sun-lines-anim: none;
            --grid-3d-display: none;
            --grid-3d-anim: none;
            --grid-perspective: 0;
            --grid-rotate-x: 0;
            --grid-top-offset: 100%;
            --grid-opacity: 0;
            --grid-image: none;
            --guide-display: none;
            --guide-color: #ff00ff; 
            --guide-line-color: #00ffff; 
            --ruler-display: none;
            --handle-display: none;
            --pastel-decor-display: none;
            --pastel-btn-shadow: none;
            --arcade-decor-display: none;
            --arcade-scanline: none;
            --card-hp-display: none;
            --paper-decor-display: none;
            --paper-texture-opacity: 0;
            --glass-shine-display: none;
            --card-clip-path: none;
        }

        /* =========================================
           2. THEME DEFINITIONS
           ========================================= */

        /* VAPORWAVE */
        [data-theme="vaporwave"] {
            --bg-layer-color: linear-gradient(180deg, #10002b 0%, #240046 40%, #3c096c 80%, #5a189a 100%);
            --bg-card: rgba(16, 0, 43, 0.9); 
            --bg-accent: #FF71CE; 
            --text-main: #01CDFE;
            --text-muted: #05FFA1;
            --text-on-accent: #000000;
            --font-main: 'Times New Roman', serif;
            --font-display: 'Times New Roman', serif;
            --letter-spacing-display: 0.5em; 
            --letter-spacing-title: 0.2em;
            --text-transform-vapor: uppercase;
            --text-shadow-chromatic: 2px 0 #ff00ff, -2px 0 #00ffff;
            --radius-sm: 0px; --radius-md: 0px; --radius-lg: 0px; --radius-btn: 0px;
            --border-width: 2px; --border-color: #01CDFE;
            --shadow-card: 6px 6px 0px rgba(1, 205, 254, 0.4), 12px 12px 0px rgba(255, 113, 206, 0.4);
            --shadow-hover: 2px 2px 0px rgba(1, 205, 254, 0.8), 4px 4px 0px rgba(255, 113, 206, 0.8);
            --card-rotation: 0deg; 
            --transform-hover: translate(-2px, -2px);
            --sun-size: 500px;
            --sun-opacity: 0.6;
            --sun-gradient: linear-gradient(to bottom, #ffeb3b 0%, #ff9800 40%, #f44336 100%);
            --sun-shadow: 0 0 40px #FF71CE, 0 0 80px #01CDFE; 
            --sun-animation: sun-glitch 4s infinite;
            --sun-lines-display: block;
            --sun-lines-pattern: repeating-linear-gradient(to bottom, transparent 0%, transparent 4px, #240046 4px, #240046 8px);
            --sun-lines-mask: linear-gradient(to bottom, transparent 60%, black 75%);
            --sun-lines-anim: sun-scan 1s linear infinite;
            --grid-3d-display: block;
            --grid-3d-anim: grid-move 3s linear infinite;
            --grid-perspective: 350px;
            --grid-rotate-x: 55deg;
            --grid-top-offset: 15%;
            --grid-opacity: 1;
            --grid-image: linear-gradient(transparent 0%, rgba(255, 113, 206, 0.5) 2px, transparent 2px), linear-gradient(90deg, transparent 0%, rgba(1, 205, 254, 0.5) 2px, transparent 2px);
            --layout-align: left;
            --layout-gap: 2rem; 
        }

        /* PASTEL */
        [data-theme="pastel"] {
            --bg-layer-color: #FFFDF5; 
            --bg-card: #FFFFFF; 
            --bg-accent: #BDE0FE; 
            --text-main: #5D576B; 
            --text-muted: #998FA2;
            --text-on-accent: #5D576B;
            --font-main: 'Fredoka', sans-serif;
            --font-display: 'Fredoka', sans-serif;
            --radius-sm: 15px; --radius-md: 25px; --radius-lg: 30px; --radius-btn: 30px; 
            --border-width: 3px; --border-color: #FFC8DD; --border-style: dashed;
            --shadow-card: 0 20px 40px -10px rgba(189, 224, 254, 0.6); 
            --shadow-hover: 0 25px 50px -12px rgba(255, 200, 221, 0.8); 
            --transform-hover: translateY(-8px) rotate(1deg) scale(1.02);
            --layout-align: center;
            --layout-align-items: center;
            --pastel-decor-display: block;
            --pastel-btn-shadow: 0 0 0 4px #A2D2FF, 0 8px 0 rgba(162, 210, 255, 0.5);
        }

        /* ARCADE */
        [data-theme="arcade"] {
            --bg-layer-color: #050011; --bg-card: #150021; --bg-accent: #FF003C;
            --text-main: #00E5FF; --text-muted: #FAFF00; --text-on-accent: #FFFFFF;
            --font-main: 'Press Start 2P', cursive; --font-display: 'Press Start 2P', cursive;
            --letter-spacing-title: 2px;
            --text-transform-vapor: uppercase;
            --text-shadow-chromatic: 4px 4px 0 #FF003C;
            --line-height-base: 1.8;
            --radius-sm: 0; --radius-md: 0; --radius-lg: 0; --radius-btn: 0;
            --border-width: 4px; --border-color: #00E5FF; --border-style: solid;
            --shadow-card: 0 0 15px rgba(0, 229, 255, 0.3), inset 0 0 20px rgba(0, 229, 255, 0.1);
            --shadow-hover: 0 0 30px #FF003C, inset 0 0 30px rgba(255, 0, 60, 0.3);
            --transform-hover: translateY(-4px);
            --layout-align: center; --layout-align-items: center; --layout-gap: 2.5rem;
            --arcade-decor-display: flex;
            --arcade-scanline: repeating-linear-gradient(to bottom, transparent 0%, transparent 2px, rgba(0,0,0,0.3) 3px);
            --card-hp-display: block;
            --grid-3d-display: block;
            --grid-3d-anim: grid-move 1s linear infinite; /* Faster */
            --grid-perspective: 200px;
            --grid-rotate-x: 60deg;
            --grid-top-offset: 40%;
            --grid-opacity: 0.6;
            --grid-image: linear-gradient(transparent 0%, #00E5FF 2px, transparent 2px), linear-gradient(90deg, transparent 0%, #00E5FF 2px, transparent 2px);
        }

        /* PAPER */
        [data-theme="paper"] {
            /* Notebook Paper Effect: Vertical Red Margin + Horizontal Blue Lines */
            --bg-layer-color: 
                linear-gradient(90deg, transparent 60px, #ff8a80 60px, #ff8a80 62px, transparent 62px),
                repeating-linear-gradient(to bottom, #fdfbf7, #fdfbf7 29px, #badcf5 30px);
            --bg-card: #ffffff; 
            --bg-accent: #2c3e50;
            --text-main: #2c3e50; --text-muted: #555; --text-on-accent: #ffffff;
            --font-main: 'Patrick Hand', cursive; 
            --font-display: 'Patrick Hand', cursive;
            --border-width: 1px; --border-color: #dcdcdc;
            --shadow-card: 3px 3px 0 #fff, 4px 4px 0 rgba(0,0,0,0.1), 6px 6px 0 #fff, 7px 7px 0 rgba(0,0,0,0.1);
            --transform-hover: translate(2px, 2px);
            --card-rotation: 1deg;
            --layout-align: left;
            --layout-align-items: flex-start;
            --paper-decor-display: block;
            --paper-texture-opacity: 0.4;
        }

        /* SCROLLING BEHAVIOR FOR PAPER THEME */
        [data-theme="paper"] .bg-layer,
        [data-theme="paper"] .paper-texture {
            position: absolute;
            height: 100%;
        }
        
        [data-theme="paper"] .paper-asset {
            position: absolute;
        }

        /* GRAFFITI */
        [data-theme="graffiti"] {
            --bg-layer-color: #1a1a1a;
            --bg-card: #ffffff; --bg-accent: #ffff00;
            --text-main: #000000; --text-muted: #444444; --text-on-accent: #000000;
            --font-main: 'Permanent Marker', cursive; --font-display: 'Permanent Marker', cursive;
            --border-width: 0;
            --shadow-card: 10px 10px 0px rgba(255, 0, 0, 0.8);
            --card-rotation: -2deg;
            --transform-hover: rotate(3deg) scale(1.1);
            --layout-align: center;
            --layout-align-items: center;
        }

        /* WIREFRAME */
        [data-theme="wireframe"] {
            --bg-layer-color: #ffffff; 
            --bg-card: #ffffff; 
            --bg-accent: #ffffff;
            --text-main: #000000; 
            --text-muted: #666666; 
            --text-on-accent: #000000;
            --font-main: 'Courier New', monospace; 
            --font-display: 'Courier New', monospace;
            --radius-sm: 0; --radius-md: 0; --radius-lg: 0; --radius-btn: 0;
            --border-width: 1px; 
            --border-color: #009999; /* Blueprint Blue */
            --border-style: solid;
            --shadow-card: none;
            --shadow-hover: none;
            --layout-align: left;
            --layout-align-items: flex-start;
            --guide-display: block;
            --ruler-display: block;
            --handle-display: block;
            --overlay-grid: none;
        }
        
        /* TERMINAL (Formerly Cyber) - LIGHT MODE (Retro Office) */
        [data-theme="terminal"] {
            --bg-layer-color: #ffffff; 
            --bg-card: #ffffff; 
            --bg-accent: #000000;
            --text-main: #000000; 
            --text-muted: #555555; 
            --text-on-accent: #ffffff;
            --font-main: 'VT323', monospace; 
            --font-display: 'VT323', monospace;
            --letter-spacing-title: 1px;
            --border-width: 1px; 
            --border-color: #000000;
            --shadow-card: 2px 2px 0 #000000;
            --layout-align: left;
            --card-clip-path: none;
        }

        /* GLASS (Premium Liquid Glass - Default Light Mode) */
        [data-theme="glass"] {
            /* Background: Sophisticated Grayish Contour Gradient (Studio Light) */
            --bg-layer-color: radial-gradient(circle at 50% 30%, #f7f8fa 0%, #d4d6db 100%);
            
            /* High-Quality Frosted Glass */
            --bg-card: rgba(255, 255, 255, 0.4); 
            --bg-accent: rgba(255, 255, 255, 0.5);
            
            /* SF Pro Style Text */
            --text-main: #1D1D1F; 
            --text-muted: rgba(60, 60, 67, 0.6); 
            --text-on-accent: #000000;
            
            --font-main: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
            --font-display: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", sans-serif;
            --letter-spacing-title: -0.015em;
            --letter-spacing-display: -0.01em;
            
            --radius-sm: 14px; 
            --radius-md: 22px; 
            --radius-lg: 34px; 
            --radius-btn: 99px;
            
            --border-width: 0; --border-color: transparent; --border-style: none;
            
            --shadow-card: 
                0 25px 50px -12px rgba(0, 0, 0, 0.1), 
                inset 0 1px 0 0 rgba(255, 255, 255, 0.6),
                inset 0 0 0 1px rgba(255, 255, 255, 0.2);
                
            --shadow-hover: 
                0 30px 60px -10px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.8),
                inset 0 0 0 1px rgba(255, 255, 255, 0.3);
            
            --transform-hover: translateY(-4px) scale(1.005);
            --layout-align: center; --layout-align-items: center;
            
            --glass-shine-display: block;
        }
        
        /* Minimal (Default) */
        [data-theme="minimal"] {
            --bg-layer-color: #ffffff;
            --layout-align: center;
            --layout-align-items: center;
        }

        /* MINIMAL THEME TYPOGRAPHY OVERRIDES */
        /* Make the hero text extremely bold and attention-grabbing */
        [data-theme="minimal"] h1 {
            font-weight: 900;
            letter-spacing: -0.04em;
            font-size: 5rem;
            line-height: 0.85; /* Tighter line height */
            color: #000000;
            margin-bottom: 1rem; /* Reduce space below title */
        }

        /* The "Design that" part */
        [data-theme="minimal"] .hero-text-upper {
            display: block;
            font-size: 0.6em; /* Smaller contrast to the big word */
            font-weight: 800;
            margin-bottom: 0; /* Remove bottom margin */
            line-height: 0.8; /* Tighter line height for the top line */
            color: #333;
        }

        /* The "MOVES" part - BIG and CAPS */
        [data-theme="minimal"] #hero-span {
            display: block; /* Force new line */
            text-transform: uppercase;
            font-size: 1.4em; /* Massive scaling relative to h1 */
            font-weight: 900;
            color: #000000 !important;
            letter-spacing: -0.06em;
            margin-top: -55px; /* Aggressive negative margin to make lines almost touch */
            /* Reset specific styles from other themes */
            background: none;
            box-shadow: none;
            border: none;
            padding: 0;
            transform: none !important; 
        }

        /* Center the hero section specifically for Minimal to create a poster-like feel */
        [data-theme="minimal"] .hero-section {
            min-height: 50vh; /* Reduced height to keep elements closer */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 2rem; /* Drastically reduced from 6rem to close gap to cards */
            padding-bottom: 0;
        }

        /* =========================================
           3. NIGHT MODE OVERRIDES
           ========================================= */
        
        /* MINIMAL DARK */
        html.dark-mode[data-theme="minimal"] {
            --bg-layer-color: #111111;
            --bg-card: #1a1a1a;
            --text-main: #ffffff;
            --text-muted: #888888;
            --bg-accent: #333333;
            --border-color: #333333;
        }
        
        /* Minimal Dark Mode Typography Overrides */
        html.dark-mode[data-theme="minimal"] h1 {
            color: #ffffff;
        }
        html.dark-mode[data-theme="minimal"] .hero-text-upper {
            color: #cccccc;
        }
        html.dark-mode[data-theme="minimal"] #hero-span {
            color: #ffffff !important;
        }

        /* PASTEL DARK (Kurumi/Kuromi Inspired: Purples, Blacks, Pinks) */
        html.dark-mode[data-theme="pastel"] {
            --bg-layer-color: #130f1a; /* Ink Black/Purple Background */
            --bg-card: #2a1f33; /* Dark plum card */
            --bg-accent: #f48fb1; /* Hot Pink Accent */
            --text-main: #e1bee7; /* Lilac Text */
            --text-muted: #9575cd; /* Deep Lavender Muted */
            --text-on-accent: #2a1f33;
            --border-color: #7b1fa2; /* Dark Purple Border */
            
            /* Kurumi-esque Glow & Shadows */
            --shadow-card: 0 10px 40px -10px rgba(0,0,0,0.8), 0 0 0 3px #4a148c;
            --pastel-btn-shadow: 0 0 0 4px #4a148c, 0 8px 0 #1a0b2e;
        }

        /* PASTEL DARK: Asset & Element Overrides */
        html.dark-mode[data-theme="pastel"] .blob-1 { background: #4a148c; opacity: 0.35; } /* Dark Purple */
        html.dark-mode[data-theme="pastel"] .blob-2 { background: #f06292; opacity: 0.25; } /* Pink */
        html.dark-mode[data-theme="pastel"] .blob-3 { background: #000000; opacity: 0.6; } /* Black */
        
        html.dark-mode[data-theme="pastel"] .sparkle { color: #f8bbd0 !important; } /* Light Pink Sparkles */
        
        /* Dark Mode "Moves" Pill override */
        html.dark-mode[data-theme="pastel"] #hero-span {
            background-color: #2a1f33;
            color: #f48fb1;
            border-color: #ad1457;
            box-shadow: 0 5px 15px -5px rgba(0,0,0,0.8);
        }
        
        /* Dark Mode Card Override (Fixing the white background) */
        html.dark-mode[data-theme="pastel"] .card {
            background-color: #2a1f33;
            border-color: #4a148c;
            color: #e1bee7;
        }
        html.dark-mode[data-theme="pastel"] .card::after {
            border-color: #f48fb1; /* Hot pink inner dash */
        }
        html.dark-mode[data-theme="pastel"] .card h3 {
            color: #f48fb1;
        }
        
        /* Dark Mode Button Override (Gothic Lolita Style) */
        html.dark-mode[data-theme="pastel"] .btn {
            background-color: #130f1a; 
            border: 2px solid #f48fb1;
            color: #f48fb1;
            box-shadow: 0 0 15px rgba(244, 143, 177, 0.3), inset 0 0 10px rgba(244, 143, 177, 0.1);
        }
        html.dark-mode[data-theme="pastel"] .btn:hover {
            background-color: #f48fb1;
            color: #130f1a;
            box-shadow: 0 0 25px rgba(244, 143, 177, 0.6);
            transform: translateY(-4px) scale(1.05);
        }

        /* PAPER DARK (Blueprint Mode: Black & Blue) */
        html.dark-mode[data-theme="paper"] {
            /* Deep Ink Blue/Black Background with Cyan/White Lines */
            --bg-layer-color: 
                linear-gradient(90deg, transparent 60px, rgba(255,255,255,0.2) 60px, rgba(255,255,255,0.2) 62px, transparent 62px),
                repeating-linear-gradient(to bottom, #0b1021, #0b1021 29px, rgba(56, 189, 248, 0.15) 30px);
            
            /* Blueprint Card Style */
            --bg-card: #121b2e; /* Dark Blue Paper */
            --text-main: #f0f9ff; /* White chalk/ink text */
            --text-muted: #94a3b8;
            --bg-accent: #3b82f6; /* Blueprint Blue */
            
            /* Technical Stroke Border */
            --border-color: #3b82f6; 
            
            /* Sharp Shadows */
            --shadow-card: 4px 4px 0 rgba(0,0,0,0.5), 0 0 0 1px #3b82f6;
        }
        
        /* Ensure sticky note pops in blueprint mode */
        html.dark-mode[data-theme="paper"] #hero-span {
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }

        /* WIREFRAME DARK (Structural CAD - White on Black) */
        html.dark-mode[data-theme="wireframe"] {
            --bg-layer-color: #050505;
            --bg-card: #050505;
            --text-main: #ffffff; /* White High Contrast */
            --text-muted: #888888;
            --bg-accent: #000000;
            --text-on-accent: #ffffff;
            --border-color: #ffffff;
            --guide-color: #aaaaaa;
            --guide-line-color: #333333;
        }
        
        /* =========================================
           TERMINAL THEME (Dual Mode)
           ========================================= */

        /* TERMINAL - LIGHT MODE (Retro Code Windows) */
        [data-theme="terminal"] {
            --bg-layer-color: #e0e0e0; /* Desktop Grey */
            --bg-card: #ffffff; 
            --bg-accent: #000000;
            --text-main: #333333; 
            --text-muted: #666666; 
            --text-on-accent: #ffffff;
            --font-main: 'VT323', monospace; 
            --font-display: 'VT323', monospace;
            --letter-spacing-title: 1px;
            --border-width: 2px; 
            --border-color: #333333;
            --shadow-card: 6px 6px 0 rgba(0,0,0,0.15);
            --layout-align: left;
            --card-clip-path: none;
        }

        /* Hero Window Styling (Light Mode Only) */
        html:not(.dark-mode)[data-theme="terminal"] .hero-section {
            background: #ffffff;
            border: 2px solid #333;
            border-radius: 4px;
            position: relative;
            padding: 4rem 2rem 2rem 2rem; /* Extra top padding for header */
            box-shadow: 10px 10px 0 rgba(0,0,0,0.1);
            margin-bottom: 4rem;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Fake Window Header for Hero */
        html:not(.dark-mode)[data-theme="terminal"] .hero-section::before {
            content: "x - □  main.js  --  v1.0";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 32px;
            background: #333;
            color: #fff;
            display: flex; align-items: center; justify-content: flex-end;
            padding-right: 16px; box-sizing: border-box;
            font-family: 'VT323', monospace; font-size: 1.2rem;
            letter-spacing: 2px;
            border-radius: 2px 2px 0 0;
            
            /* Reset Sun/Scanline properties that might bleed in */
            transform: none; animation: none; opacity: 1; border-radius: 2px 2px 0 0;
            box-shadow: none; mask-image: none; -webkit-mask-image: none;
        }
        
        /* Hide the 'after' pseudo element (scanlines) in light mode */
        html:not(.dark-mode)[data-theme="terminal"] .hero-section::after {
            display: none;
        }

        /* Card Window Styling (Light Mode Only) */
        html:not(.dark-mode)[data-theme="terminal"] .card {
            border: 2px solid #333;
            border-radius: 4px;
            padding-top: 3.5rem; /* Space for title bar */
            position: relative;
            overflow: hidden;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.15);
        }

        /* Fake Window Header for Cards */
        html:not(.dark-mode)[data-theme="terminal"] .card::before {
            content: "● ● ●  function()"; 
            position: absolute;
            top: 0; left: 0; width: 100%; height: 32px;
            background: #f3f4f6; /* Light grey header */
            border-bottom: 2px solid #333;
            display: flex; align-items: center; padding-left: 12px;
            font-family: 'VT323', monospace; color: #555;
            font-size: 1.2rem;
            letter-spacing: 2px;
            box-sizing: border-box;
            z-index: 1;
        }

        /* TERMINAL DARK (Matrix Hacker Mode) */
        html.dark-mode[data-theme="terminal"] {
            --bg-layer-color: #000000;
            --bg-card: rgba(0, 20, 0, 0.85); /* Slightly darker card */
            --text-main: #00FF00; /* Phosphor Green */
            --text-muted: #008800;
            --bg-accent: #003300;
            --text-on-accent: #00FF00;
            --border-color: #00FF00;
            --shadow-card: 0 0 15px rgba(0, 255, 0, 0.3);
            /* Reset window styling for matrix mode */
            --border-width: 1px;
        }
        
        /* Reset Pseudo elements for Dark Mode (No windows, just glow) */
        html.dark-mode[data-theme="terminal"] .hero-section::before {
            display: none; /* No window header */
        }
        html.dark-mode[data-theme="terminal"] .card::before {
            display: none; /* No window header */
        }
        html.dark-mode[data-theme="terminal"] .card {
            padding-top: 2.5rem; /* Reset padding */
        }
        html.dark-mode[data-theme="terminal"] .hero-section {
            background: transparent;
            border: none;
            box-shadow: none;
            padding: 2rem 0;
        }
        
        html.dark-mode[data-theme="terminal"] .vhs-overlay {
            opacity: 1; /* Turn on CRT flicker */
            background: repeating-linear-gradient(0deg, transparent 0px, transparent 2px, rgba(0, 255, 0, 0.1) 3px);
            animation: cyber-scan 8s linear infinite;
        }

        /* GLASS DARK (VisionOS Dark) */
        html.dark-mode[data-theme="glass"] {
            /* Background: Deep Studio Dark Grey */
            --bg-layer-color: radial-gradient(circle at 50% 0%, #48484a 0%, #1c1c1e 100%);
            
            /* High-Quality Frosted Glass */
            --bg-card: rgba(255, 255, 255, 0.06); 
            --bg-accent: rgba(255, 255, 255, 0.12);
            
            --text-main: #F5F5F7; 
            --text-muted: rgba(235, 235, 245, 0.6); 
            --text-on-accent: #FFFFFF;
            
            --shadow-card: 
                0 25px 50px -12px rgba(0, 0, 0, 0.5), 
                inset 0 1px 0 0 rgba(255, 255, 255, 0.2),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
                
            --shadow-hover: 
                0 40px 80px -15px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1);
        }

        /* =========================================
           3. GLOBAL & LAYOUT
           ========================================= */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            transition: all 0.6s cubic-bezier(0.25, 1, 0.5, 1);
        }

        body {
            font-family: var(--font-main);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden; 
            padding-bottom: 100px;
            position: relative;
            background: transparent;
            line-height: var(--line-height-base);
        }

        /* --- LAYERING SYSTEM --- */
        .bg-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-layer-color);
            z-index: -10;
        }
        
        .grid-floor {
            display: var(--grid-3d-display);
            position: fixed;
            top: var(--grid-top-offset);
            left: -50%;
            width: 200%;
            height: 120%; 
            background: var(--grid-image);
            background-size: 60px 60px;
            transform: perspective(var(--grid-perspective)) rotateX(var(--grid-rotate-x));
            z-index: -9;
            animation: var(--grid-3d-anim);
            opacity: var(--grid-opacity);
            pointer-events: none;
            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 100%);
            mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 100%);
        }
        
        .paper-texture {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: -8;
            opacity: var(--paper-texture-opacity);
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E");
            transition: opacity 0.5s ease;
        }

        /* Level -7: The Assets */
        .vapor-asset, .pastel-asset, .arcade-asset, .paper-asset, .glass-asset, .graffiti-asset, .terminal-asset {
            position: fixed;
            pointer-events: none;
            z-index: -7;
            opacity: 0;
            transition: opacity 0.8s ease;
        }
        
        [data-theme="vaporwave"] .vapor-asset { opacity: 1; }
        
        /* ASSET VISIBILITY CONTROLS */
        .pastel-asset { display: none; }
        [data-theme="pastel"] .pastel-asset { display: block; opacity: 1; }
        
        .arcade-asset { display: none; }
        [data-theme="arcade"] .arcade-asset { display: flex; opacity: 1; }
        
        .paper-asset { display: none; }
        [data-theme="paper"] .paper-asset { display: block; opacity: 1; }
        
        .glass-asset { display: none; }
        [data-theme="glass"] .glass-asset { display: block; opacity: 1; }
        
        .graffiti-asset { display: none; }
        [data-theme="graffiti"] .graffiti-asset { display: block; opacity: 1; }

        /* MATRIX CANVAS */
        .terminal-asset { display: none; z-index: -9; opacity: 0; }
        html.dark-mode[data-theme="terminal"] .terminal-asset {
            display: block; opacity: 0.3; /* Subtle background */
        }

        /* VAPORWAVE TEXT */
        .vapor-text-vert {
            top: 25%;
            left: 20px;
            writing-mode: vertical-rl;
            text-orientation: upright;
            font-family: "MS Gothic", sans-serif;
            color: #00ffff;
            font-size: 1.8rem;
            text-shadow: 3px 3px #ff00ff;
            letter-spacing: 0.5em;
        }
        
        /* --- PAPER ASSETS --- */
        /* Replaced Coffee Stain with Pencil */
        .pencil-asset {
            position: fixed;
            bottom: -30px;
            right: 5%;
            width: 180px;
            z-index: -5;
            transform: rotate(-15deg);
            filter: drop-shadow(5px 10px 5px rgba(0,0,0,0.15));
        }
        
        /* --- GRAFFITI ASSETS --- */
        .graffiti-drip {
            top: 0; left: 10%; width: 200px;
            filter: drop-shadow(2px 2px 0 #000);
            z-index: -5;
        }
        
        .graffiti-tag {
            bottom: 10%; right: 5%; width: 250px;
            transform: rotate(-10deg);
            z-index: -5;
            filter: drop-shadow(2px 2px 0 #000);
        }
        
        /* --- ARCADE ASSETS --- */
        .arcade-star {
            width: 8px; height: 8px;
            background: #FAFF00;
            box-shadow: 0 0 10px #FAFF00;
            animation: arcade-twinkle 1s steps(2) infinite;
        }
        .as-1 { top: 10%; left: 10%; }
        .as-2 { top: 20%; right: 20%; animation-delay: 0.3s; background: #FF003C; box-shadow: 0 0 10px #FF003C;}
        .as-3 { bottom: 30%; left: 15%; animation-delay: 0.7s; background: #00E5FF; box-shadow: 0 0 10px #00E5FF;}
        .as-4 { bottom: 10%; right: 10%; }
        .as-5 { top: 50%; left: 5%; width: 12px; height: 12px; }
        
        .arcade-score-bar {
            position: absolute; top: 20px; left: 0; width: 100%;
            justify-content: center; gap: 40px;
            font-family: 'Press Start 2P', cursive;
            color: #fff; font-size: 0.8rem;
            text-shadow: 2px 2px 0 #FF003C;
            z-index: 10;
        }
        .score-val { color: #FAFF00; }
        
        .arcade-hp-bar {
            width: 100%; max-width: 400px;
            margin: 0 auto 1.5rem auto;
            align-items: center; gap: 10px;
            font-family: 'Press Start 2P', cursive;
            color: #00E5FF; font-size: 0.8rem;
            z-index: 10; position: relative;
        }
        .hp-container {
            flex: 1; height: 24px; background: #150021;
            border: 2px solid #fff; display: flex; padding: 2px;
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }
        .hp-fill {
            height: 100%; width: 80%;
            background: linear-gradient(90deg, #FAFF00 0%, #FF003C 100%);
            box-shadow: 0 0 10px #FF003C;
            animation: hp-pulse 2s infinite;
        }
        
        .arcade-cursor {
            animation: blink 1s step-end infinite;
            display: inline-block; color: #FAFF00;
            text-shadow: 0 0 5px #FAFF00;
        }
        
        @keyframes hp-pulse { 0% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 1; } }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        @keyframes arcade-twinkle { 0% { opacity: 1; } 50% { opacity: 0.3; } }
        
        /* --- PASTEL ASSETS (BLOBS) --- */
        .blob {
            position: fixed; border-radius: 50%;
            filter: blur(80px); z-index: -8;
            animation: blob-float 10s infinite alternate;
        }
        [data-theme="pastel"] .blob-1 { opacity: 0.2; }
        [data-theme="pastel"] .blob-2 { opacity: 0.2; }
        [data-theme="pastel"] .blob-3 { opacity: 0.15; }
        .blob-1 { width: 400px; height: 400px; background: #FFC8DD; top: -100px; left: -100px; }
        .blob-2 { width: 300px; height: 300px; background: #BDE0FE; bottom: 10%; right: -50px; animation-delay: -2s; }
        .blob-3 { width: 200px; height: 200px; background: #A2D2FF; top: 40%; left: 20%; animation-delay: -5s; }
        
        .sparkle {
            position: fixed; color: #FFC8DD; z-index: -5;
            animation: sparkle-twinkle 3s infinite;
        }
        .sparkle-1 { top: 15%; left: 20%; width: 30px; }
        .sparkle-2 { bottom: 20%; right: 25%; width: 40px; animation-delay: 1s; color: #BDE0FE; }
        .sparkle-3 { top: 30%; right: 10%; width: 25px; animation-delay: 2s; color: #CDB4DB; }
        .sparkle-4 { top: 10%; left: 5%; width: 20px; animation-delay: 0.5s; color: #A2D2FF; }
        .sparkle-5 { bottom: 5%; left: 50%; width: 35px; animation-delay: 1.5s; color: #FFC8DD; }
        .sparkle-6 { top: 50%; right: 5%; width: 28px; animation-delay: 2.5s; color: #BDE0FE; }
        .sparkle-7 { top: 5%; right: 30%; width: 22px; animation-delay: 0.8s; color: #FFAFCC; }
        .sparkle-8 { bottom: 15%; left: 10%; width: 32px; animation-delay: 1.2s; color: #CDB4DB; }
        .sparkle-9 { top: 40%; left: 40%; width: 18px; animation-delay: 1.8s; color: #A2D2FF; }

        @keyframes blob-float { 0% { transform: translate(0, 0) scale(1); } 100% { transform: translate(20px, 40px) scale(1.1); } }
        @keyframes sparkle-twinkle { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.3) rotate(15deg); opacity: 1; } }
        
        /* GLASS ASSETS (Liquid Gradient Mesh) */
        .glass-orb {
            position: fixed;
            border-radius: 50%;
            z-index: -9;
            /* Default animation */
            animation: orb-float 20s infinite alternate cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
        }

        /* Reflection Shine for all orbs (Hidden for Liquid) */
        .glass-orb::after {
            content: '';
            position: absolute;
            top: 15%;
            left: 18%;
            width: 25%;
            height: 12%;
            border-radius: 50%;
            background: radial-gradient(ellipse at center, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(-45deg);
            filter: blur(1px);
            display: none;
        }
        
        /* Activate assets in Glass Theme - CLEAR GLASS ORBS (Light/Dark Mode Tuned) */
        [data-theme="glass"] .glass-orb {
            filter: none; 
            opacity: 1;
            mix-blend-mode: normal;
            transition: all 1s ease;
            
            /* Realistic Glass Shader for Light Mode (Default) */
            background: radial-gradient(120% 120% at 30% 30%, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.01) 50%, 
                rgba(255, 255, 255, 0.05) 100%);
                
            /* Iridescence */
            box-shadow: 
                inset 10px 10px 40px rgba(255, 255, 255, 0.8), 
                inset -5px -5px 20px rgba(255, 255, 255, 0.2), 
                inset 40px 0 60px rgba(255, 0, 220, 0.1), 
                inset -40px 0 60px rgba(0, 220, 255, 0.1), 
                0 20px 50px rgba(0,0,0,0.1); 
            
            border: 1px solid rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(4px); 
        }
        
        /* Adjust Orbs for Dark Mode */
        html.dark-mode[data-theme="glass"] .glass-orb {
            background: radial-gradient(120% 120% at 30% 30%, 
                rgba(255, 255, 255, 0.15) 0%, 
                rgba(255, 255, 255, 0.01) 50%, 
                rgba(255, 255, 255, 0.05) 100%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 
                inset 10px 10px 40px rgba(255, 255, 255, 0.5), 
                inset -5px -5px 20px rgba(255, 255, 255, 0.1), 
                inset 40px 0 60px rgba(255, 0, 220, 0.2), 
                inset -40px 0 60px rgba(0, 220, 255, 0.2), 
                0 20px 50px rgba(0,0,0,0.3); 
        }
        
        /* Show the specular highlight */
        [data-theme="glass"] .glass-orb::after { 
            display: block; 
            background: rgba(255, 255, 255, 0.8);
            filter: blur(4px);
            width: 15%; height: 8%; top: 20%; left: 22%;
        }

        /* Individual Positioning & Sizes - Floating Objects (Spread Out & Depth) */
        
        /* FOREGROUND (Clear, Opaque) */
        [data-theme="glass"] .orb-1 { 
            width: 220px; height: 220px; top: 5%; left: 5%; 
            opacity: 0.5; animation-duration: 28s;
            filter: blur(0px); z-index: -8;
        }
        
        /* BACKGROUND (Blurred, Faded) */
        [data-theme="glass"] .orb-2 { 
            width: 320px; height: 320px; bottom: 5%; right: 2%; 
            opacity: 0.3; animation-delay: -5s; animation-duration: 35s;
            filter: blur(4px); z-index: -10; transform: scale(0.9);
        }
        
        /* MIDGROUND */
        [data-theme="glass"] .orb-3 { 
            width: 160px; height: 160px; top: 45%; left: 12%; 
            opacity: 0.45; animation-delay: -10s; animation-duration: 24s;
            filter: blur(1px); z-index: -9;
        }
        
        /* FAR BACKGROUND */
        [data-theme="glass"] .orb-4 { 
            width: 130px; height: 130px; top: 12%; right: 15%; 
            opacity: 0.1; animation-delay: -2s; animation-duration: 26s;
            filter: blur(6px); z-index: -11;
        }
        
        /* FOREGROUND */
        [data-theme="glass"] .orb-5 { 
            width: 190px; height: 190px; bottom: 25%; left: 35%; 
            opacity: 0.5; animation-delay: -8s; animation-duration: 32s;
            filter: blur(0px); z-index: -8;
        }
        
        /* FAR BACKGROUND */
        [data-theme="glass"] .orb-6 { 
            width: 260px; height: 260px; top: 55%; right: 30%; 
            opacity: 0.2; animation-delay: -15s; display: block; animation-duration: 30s;
            filter: blur(8px); z-index: -12;
        }
        
        /* Activate Extra Bubbles with Varied Depth */
        [data-theme="glass"] .orb-7 { 
            width: 90px; height: 90px; top: 35%; left: 85%; 
            display: block; animation-delay: -3s; animation-duration: 19s;
            opacity: 0.35; filter: blur(2px); 
        }
        
        [data-theme="glass"] .orb-8 { 
            width: 110px; height: 110px; bottom: 45%; left: 5%; 
            display: block; animation-delay: -12s; animation-duration: 23s;
            opacity: 0.08; filter: blur(10px); z-index: -12;
        }
        
        [data-theme="glass"] .orb-9 { 
            width: 70px; height: 70px; top: 8%; left: 45%; 
            display: block; animation-delay: -6s; animation-duration: 16s;
            opacity: 0.3; filter: blur(3px);
        }
        
        [data-theme="glass"] .orb-10 { 
            width: 150px; height: 150px; bottom: 8%; left: 65%; 
            display: block; animation-delay: -20s; animation-duration: 31s;
            opacity: 0.2; filter: blur(5px);
        }
        
        [data-theme="glass"] .orb-11 { 
            width: 100px; height: 100px; top: 28%; left: 35%; 
            display: block; animation-delay: -9s; animation-duration: 22s; 
            opacity: 0.15; filter: blur(8px); z-index: -11;
        }
        
        [data-theme="glass"] .orb-12 { 
            width: 170px; height: 170px; top: 75%; right: 48%; 
            display: block; animation-delay: -4s; animation-duration: 27s;
            opacity: 0.45; filter: blur(1px);
        }

        @keyframes orb-float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, -40px) scale(1.05); }
        }
        
        /* SHEEN ANIMATION (Light passing over glass) */
        @keyframes shimmer {
            0% { left: -100%; opacity: 0; }
            50% { opacity: 0.5; }
            100% { left: 200%; opacity: 0; }
        }

        /* VHS OVERLAY */
        .vhs-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 999; pointer-events: none;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            opacity: 0; transition: opacity 0.5s;
        }
        [data-theme="vaporwave"] .vhs-overlay, [data-theme="arcade"] .vhs-overlay {
            opacity: 1; animation: vhs-flicker 0.15s infinite;
        }
        [data-theme="arcade"] .vhs-overlay {
             background-image: var(--arcade-scanline);
             background-size: 100% 4px; opacity: 0.3;
        }
        
        /* CYBER SCAN OVERLAY */
        [data-theme="cyber"] .vhs-overlay {
            opacity: 1;
            background: repeating-linear-gradient(0deg, transparent 0px, transparent 2px, rgba(0, 243, 255, 0.1) 3px);
            background-size: 100% 4px;
            animation: cyber-scan 6s linear infinite;
        }
        
        @keyframes cyber-scan {
            0% { background-position: 0 0; }
            100% { background-position: 0 1000px; }
        }

        /* ANIMATIONS */
        @keyframes grid-move { 0% { background-position: 0 0; } 100% { background-position: 0 60px; } }
        @keyframes vhs-flicker { 0% { opacity: 0.95; } 50% { opacity: 1; } 100% { opacity: 0.98; } }
        @keyframes sun-glitch {
            0% { transform: translateY(-50%) translateX(0); }
            95% { transform: translateY(-50%) translateX(0); }
            96% { transform: translateY(-50%) translateX(3px); }
            97% { transform: translateY(-50%) translateX(-3px); }
            98% { transform: translateY(-50%) translateX(0); }
            100% { transform: translateY(-50%) translateX(0); }
        }
        @keyframes sun-scan { 0% { background-position: 0 0; } 100% { background-position: 0 40px; } }

        /* CONTAINER */
        .container {
            max-width: var(--container-max); margin: 0 auto; padding: 2rem;
            display: flex; flex-direction: column;
            align-items: var(--layout-align-items);
            position: relative; z-index: 1;
        }
        
        /* 2D Grid Overlay */
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: -6;
            background-image: var(--overlay-grain), var(--overlay-grid);
            background-size: 150px 150px, var(--overlay-grid-size) var(--overlay-grid-size), var(--overlay-grid-size) var(--overlay-grid-size);
            background-position: center top; opacity: 1;
        }

        /* HEADER */
        header {
            width: 100%; display: flex; justify-content: space-between;
            align-items: center; padding: 2rem 0; margin-bottom: 4rem;
            border-bottom: 1px solid transparent;
        }
        [data-theme="minimal"] header, [data-theme="wireframe"] header { border-bottom-color: var(--border-color); }
        .logo {
            font-family: var(--font-display); font-size: 1.5rem; font-weight: 800;
            text-transform: uppercase; letter-spacing: 1px;
            text-shadow: var(--text-shadow-chromatic);
        }

        /* HERO */
        .hero-section {
            position: relative; z-index: 1; margin-bottom: 6rem;
            width: 100%; text-align: var(--layout-align); padding: 2rem 0;
        }
        
        /* Glass Hero Panel (Liquid UI) */
        [data-theme="glass"] .hero-section {
            background: rgba(255, 255, 255, 0.03); /* Extremely thin glass */
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid transparent; 
            box-shadow: 
                0 40px 80px -10px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.15),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            border-radius: 40px;
            padding: 3rem;
            margin-bottom: 4rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* PAPER "Moves" STYLING (Sticky Note with Push Pin) */
        [data-theme="paper"] #hero-span {
            font-family: 'Permanent Marker', cursive;
            background-color: #fff9c4; /* Pale Yellow Note */
            color: #000000 !important; /* Pure Black Marker (Forced) */
            padding: 10px 20px;
            margin-left: 10px;
            transform: rotate(-4deg) translateY(-8px);
            display: inline-block;
            box-shadow: 2px 4px 8px rgba(0,0,0,0.2); /* Lift shadow */
            border-radius: 2px;
            text-shadow: none;
            position: relative;
            z-index: 5;
        }

        /* The Push Pin - Improved 3D Look */
        [data-theme="paper"] #hero-span::after {
            content: '';
            position: absolute;
            top: -2px; /* Lowered significantly to "pierce" the paper */
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 16px;
            border-radius: 50%;
            /* Red plastic pin head with highlight */
            background: radial-gradient(circle at 30% 30%, #ff8a80 0%, #e53935 60%, #b71c1c 100%);
            box-shadow: 
                inset -1px -1px 2px rgba(0,0,0,0.3), /* Self shadow */
                0 0 0 1px rgba(183, 28, 28, 0.3), /* Subtle rim */
                2px 3px 5px rgba(0,0,0,0.4); /* Pin shadow on paper */
            z-index: 6;
        }
        
        /* PAPER BUTTON (Matte Textured Eraser) */
        [data-theme="paper"] .btn {
            /* Matte Linear Gradient */
            background: linear-gradient(to bottom, #ffcdd2 0%, #ef9a9a 100%);
            color: #b71c1c; /* Stamped ink color */
            border: 1px solid #e57373;
            border-radius: 4px; /* Slightly worn corners */
            font-family: 'Fredoka', sans-serif;
            text-transform: uppercase;
            font-weight: 800;
            padding: 18px 50px;
            transform: skewX(-10deg) rotate(-2deg); /* Isometric-ish angle */
            /* Stacked shadows for solid 3D block effect */
            box-shadow: 
                1px 1px 0px #c62828,
                2px 2px 0px #c62828,
                3px 3px 0px #c62828,
                4px 4px 0px #c62828,
                5px 5px 0px #c62828,
                6px 6px 0px #c62828, /* Deep block side */
                6px 10px 15px rgba(0,0,0,0.3); /* Ground Shadow */
            transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            letter-spacing: 1px;
            text-shadow: 0 1px 0 rgba(255,255,255,0.3); /* Engraved text */
            position: relative;
            overflow: hidden;
        }
        
        /* Eraser Grainy Texture (Noise) */
        [data-theme="paper"] .btn::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            /* SVG Noise Filter */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.4'/%3E%3C/svg%3E");
            opacity: 0.3; /* Subtle rubber grain */
            mix-blend-mode: multiply;
            pointer-events: none;
        }

        [data-theme="paper"] .btn:hover {
            transform: skewX(-10deg) rotate(-2deg) translateY(-2px);
            /* Slightly lighter linear gradient on hover */
            background: linear-gradient(to bottom, #ffebee 0%, #ef9a9a 100%);
            box-shadow: 
                1px 1px 0px #c62828,
                2px 2px 0px #c62828,
                3px 3px 0px #c62828,
                4px 4px 0px #c62828,
                5px 5px 0px #c62828,
                6px 6px 0px #c62828,
                7px 7px 0px #c62828,
                8px 8px 0px #c62828,
                10px 15px 25px rgba(0,0,0,0.3);
        }
        
        [data-theme="paper"] .btn:active {
            /* Squish Effect */
            transform: skewX(-10deg) rotate(-2deg) translateY(4px);
            box-shadow: 
                1px 1px 0px #c62828,
                2px 2px 0px #c62828,
                2px 4px 5px rgba(0,0,0,0.3);
        }
        
        /* GLASS "Moves" STYLING (Bubble Pill) */
        [data-theme="glass"] #hero-span {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
            padding: 2px 20px;
            border-radius: 50px;
            margin-left: 10px;
            color: #000000 !important; /* Dark text for visibility in light mode */
            font-weight: 700;
            font-size: 1.2em;
            position: relative;
            overflow: hidden; /* For sheen */
        }

        /* Glass "Moves" Dark Mode Override */
        html.dark-mode[data-theme="glass"] #hero-span {
            color: #FFFFFF !important;
        }
        
        /* Sheen for "Moves" */
        [data-theme="glass"] #hero-span:hover::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 50%; height: 100%;
            background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);
            transform: skewX(-25deg);
            animation: shimmer 0.8s;
        }
        
        /* TERMINAL "Moves" Styling */
        [data-theme="terminal"] #hero-span {
            background: #000;
            color: #fff;
            padding: 2px 10px;
            border: 1px solid #000;
            font-family: 'VT323', monospace;
        }
        html.dark-mode[data-theme="terminal"] #hero-span {
            background: #000;
            color: #00ff00;
            border-color: #00ff00;
            box-shadow: 0 0 5px #00ff00;
        }
        
        /* PASTEL CENTERING */
        [data-theme="pastel"] .hero-section {
            text-align: center; display: flex; flex-direction: column;
            align-items: center; margin-bottom: 1rem;
        }
        [data-theme="pastel"] h1 { 
            margin-left: auto; 
            margin-right: auto; 
            font-size: 6rem; /* Reduced slightly to prevent overflow */
            line-height: 1.1; 
            margin-bottom: 1.5rem; 
            max-width: 100%; /* Allow full width centering */
        }
        
        /* WIREFRAME ALIGNMENT HANDLES */
        [data-theme="wireframe"] .hero-section::before, [data-theme="wireframe"] .card::before, [data-theme="wireframe"] .btn::before {
            content: ''; display: var(--handle-display); position: absolute; inset: -4px; z-index: 20; pointer-events: none;
            background: 
                linear-gradient(#ccc, #ccc) top left, linear-gradient(#ccc, #ccc) top right,
                linear-gradient(#ccc, #ccc) bottom left, linear-gradient(#ccc, #ccc) bottom right;
            background-size: 5px 5px; background-repeat: no-repeat;
        }
        
        /* SUN */
        .hero-section::before {
            content: ''; position: absolute; right: 0; top: 50%;
            transform: translateY(-50%); width: var(--sun-size); height: var(--sun-size);
            background-image: var(--sun-gradient); background-size: 100% 100%;
            border-radius: 50%; opacity: var(--sun-opacity); z-index: -8; 
            pointer-events: none; box-shadow: var(--sun-shadow);
            transition: all 0.6s ease; animation: var(--sun-animation);
        }

        /* SUN SCANLINES */
        .hero-section::after {
            content: ''; display: var(--sun-lines-display); position: absolute;
            right: 0; top: 50%; transform: translateY(-50%);
            width: var(--sun-size); height: var(--sun-size);
            background-image: var(--sun-lines-pattern); background-size: 100% 100%;
            -webkit-mask-image: var(--sun-lines-mask); mask-image: var(--sun-lines-mask);
            border-radius: 50%; opacity: 0.8; z-index: -8; pointer-events: none;
            animation: var(--sun-lines-anim);
        }
        [data-theme="minimal"] .hero-section::before { width: 0; height: 0; opacity: 0; }

        h1 {
            font-family: var(--font-display); font-size: 4rem; line-height: 1.1;
            margin-bottom: 1.5rem; max-width: 600px;
            text-shadow: var(--text-shadow-chromatic); position: relative;
        }
        
        /* HERO GUIDELINES (Wireframe Only) */
        .hero-text-upper { position: relative; display: inline-block; }
        [data-theme="wireframe"] .hero-text-upper::before, [data-theme="wireframe"] .hero-text-upper::after,
        [data-theme="wireframe"] #hero-span::after {
            content: ''; position: absolute; top: -100vh; height: 200vh; width: 1px;
            background: var(--guide-line-color); opacity: 0.7;
        }
        [data-theme="wireframe"] .hero-text-upper::before { left: -10px; }
        [data-theme="wireframe"] .hero-text-upper::after { right: -10px; }
        
        #hero-span {
            letter-spacing: var(--letter-spacing-display);
            margin-right: calc(var(--letter-spacing-display) * -1); 
            text-transform: var(--text-transform-vapor); display: inline-block; position: relative;
        }
        [data-theme="wireframe"] #hero-span::after { right: -10px; }
        
        /* PASTEL "MOVES" STYLING */
        [data-theme="pastel"] #hero-span {
            color: #ffffff; background-color: #FFC8DD; font-family: 'Fredoka', sans-serif;
            font-weight: 600; font-style: italic; padding: 5px 30px; 
            border: 5px solid #BDE0FE; border-radius: 100px;
            transform: rotate(-3deg); margin-left: 15px; letter-spacing: 1px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
            box-shadow: 0 10px 20px -5px rgba(255, 200, 221, 0.8); 
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        [data-theme="pastel"] #hero-span:hover { transform: rotate(2deg) scale(1.1); cursor: default; }
        [data-theme="pastel"] #hero-span::after {
            content: ''; position: absolute; inset: 4px; border: 2px dashed #ffffff;
            border-radius: 100px; pointer-events: none; height: auto; width: auto; background: none;
            top: 4px; left: 4px; right: 4px; bottom: 4px; opacity: 1;
        }
        
        [data-theme="graffiti"] h1 { transform: rotate(-3deg); text-shadow: 4px 4px 0px #fff; }

        p.lead {
            font-size: 1.25rem; color: var(--text-muted); margin-bottom: 2rem;
            max-width: 500px;
            margin-left: var(--layout-align) == 'center' ? 'auto' : 0;
            margin-right: var(--layout-align) == 'center' ? 'auto' : 0;
        }
        [data-theme="pastel"] p.lead, [data-theme="arcade"] p.lead { margin-left: auto; margin-right: auto; }
        [data-theme="arcade"] h1 { margin-left: auto; margin-right: auto; }
        
        /* --- BUTTONS --- */
        .btn {
            display: inline-block; padding: 14px 32px; background-color: var(--bg-accent);
            color: var(--text-on-accent); border-radius: var(--radius-btn); text-decoration: none;
            font-weight: 600; border: var(--border-width) var(--border-style) var(--border-color);
            cursor: pointer; text-transform: uppercase; font-size: 0.9rem; position: relative;
        }
        .btn:hover { transform: var(--transform-hover); box-shadow: var(--shadow-hover); }
        
        .hero-btn { margin-top: 2rem; }
        
        [data-theme="pastel"] .btn {
            background-color: #BDE0FE; border: 4px solid #A2D2FF; border-style: solid;
            box-shadow: var(--pastel-btn-shadow); color: #5D576B; border-radius: 20px;
        }
        [data-theme="pastel"] .btn::after {
            content: ''; position: absolute; inset: 4px; border: 2px dashed #ffffff; border-radius: 12px; pointer-events: none;
        }
        
        /* ARCADE BUTTON: SKEUOMORPHIC PUSH BUTTON */
        [data-theme="arcade"] .btn {
            background-color: #D90033; /* Darker base for shadow contrast */
            border: none;
            border-radius: 50px;
            color: #fff;
            cursor: pointer;
            outline: none;
            position: relative;
            transition: box-shadow 0.1s;
            /* Complex shadow stack for convex 3D look */
            box-shadow: 
                inset 0 6px 0 hsl(345, 100%, 60%), /* Top Highlight */
                inset 0 -6px 2px hsl(345, 100%, 35%), /* Bottom Shading */
                0 0 2px #FF003C, /* Glow outline */
                inset 0 0 5px hsl(345, 100%, 20%), /* Inner depth */
                inset 0 0 10px hsl(345, 100%, 15%), /* Deep inner depth */
                inset 0 3px 10px rgba(255,255,255,0.2), /* Soft top shine */
                0 8px 10px rgba(0,0,0,0.5), /* Drop shadow (height) */
                0 0 20px rgba(255, 0, 60, 0.4); /* Neon Glow */
        }
        /* The Glossy Reflection */
        [data-theme="arcade"] .btn::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 15%;
            width: 70%;
            height: 40%;
            background: linear-gradient(to bottom, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 100%);
            border-radius: 50px; /* Match button curvature */
            opacity: 0.6;
            pointer-events: none;
        }
        [data-theme="arcade"] .btn:active {
            background-color: #B3002A;
            transform: translateY(4px);
            box-shadow: 
                inset 0 6px 0 hsl(345, 100%, 60%),
                inset 0 -6px 2px hsl(345, 100%, 35%),
                0 0 2px #FF003C,
                inset 0 0 5px hsl(345, 100%, 20%),
                inset 0 0 10px hsl(345, 100%, 15%),
                0 4px 5px rgba(0,0,0,0.5), /* Reduced drop shadow */
                0 0 15px rgba(255, 0, 60, 0.3);
        }
        
        /* GLASS BUTTON (Liquid UI) */
        [data-theme="glass"] .btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            border: none;
            color: #000000; /* Dark text for visibility in light mode */
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.15), 0 4px 10px rgba(0,0,0,0.2);
            border-radius: 50px;
            font-weight: 500;
            letter-spacing: -0.01em;
        }
        [data-theme="glass"] .btn:hover {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.3), 0 8px 20px rgba(0,0,0,0.3);
            transform: translateY(-2px);
        }

        /* Glass Button Dark Mode Override */
        html.dark-mode[data-theme="glass"] .btn {
            color: #FFFFFF;
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* CYBER/TERMINAL BUTTON */
        [data-theme="terminal"] .btn {
            background: #ffffff;
            color: #000000;
            border: 1px solid #000000;
            box-shadow: 2px 2px 0 #000000;
            text-transform: uppercase;
            font-family: 'VT323', monospace;
            font-size: 1.1rem;
            letter-spacing: 1px;
            transition: all 0.1s;
        }
        [data-theme="terminal"] .btn:hover {
            transform: translate(2px, 2px);
            box-shadow: none;
        }
        html.dark-mode[data-theme="terminal"] .btn {
            background: #000000;
            color: #00FF00;
            border-color: #00FF00;
            box-shadow: 0 0 10px #00FF00;
        }
        html.dark-mode[data-theme="terminal"] .btn:hover {
            background: #003300;
            box-shadow: 0 0 20px #00FF00;
            transform: translateY(-2px);
        }
        
        /* GRAFFITI BUTTON */
        [data-theme="graffiti"] .btn {
            background: #000;
            color: #FFFF00;
            border: 3px solid #FFFF00;
            transform: rotate(-2deg);
            box-shadow: 5px 5px 0 #fff;
        }
        [data-theme="graffiti"] .btn:hover {
            transform: rotate(0deg) scale(1.1);
        }

        /* FEATURES GRID */
        .features-grid {
            width: 100%; display: grid; grid-template-columns: var(--grid-columns);
            gap: var(--layout-gap); margin-bottom: 6rem; transition: all 0.6s ease;
        }
        [data-theme="vaporwave"] .features-grid { display: flex; flex-wrap: wrap; justify-content: center; padding: 2rem 0; }

        .card {
            background-color: var(--bg-card); padding: 2.5rem;
            border-radius: var(--radius-lg); border: var(--border-width) var(--border-style) var(--border-color);
            box-shadow: var(--shadow-card); transform: rotate(var(--card-rotation));
            display: flex; flex-direction: column; align-items: flex-start;
            gap: 1rem; backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        
        /* GLASS CARDS (Liquid UI) */
        [data-theme="glass"] .card {
            /* Ultra-premium glass background - Dark Mode */
            background: rgba(255, 255, 255, 0.03); 
            
            /* Strong Blur + Saturation Boost */
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            
            /* Clean Rim (simulating cut glass edge) */
            border: 1px solid rgba(255, 255, 255, 0.08);
            
            /* Sophisticated Depth Shadow & Inner Light */
            box-shadow: 
                0 25px 50px -12px rgba(0,0,0,0.3),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.15),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            
            overflow: hidden;
            color: var(--text-main); /* FIX: Use variable so it's dark in light mode */
            border-radius: 32px; 
            position: relative;
        }
        
        /* Top shine gradient for glass cards */
        [data-theme="glass"] .card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            /* Subtle gradients for the glass surface reflection */
            background: linear-gradient(180deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.0) 30%);
            pointer-events: none; z-index: 2;
            opacity: 1;
            border-radius: inherit;
        }
        
        /* Interactive Sheen on Hover */
        [data-theme="glass"] .card:hover::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
            transform: skewX(-15deg);
            z-index: 3;
            pointer-events: none;
            animation: shimmer 0.75s forwards;
        }
        
        /* Glass Icon container - Removed circular background */
        [data-theme="glass"] .card-icon {
            background: transparent;
            padding: 0;
            border-radius: 0;
            border: none;
            color: var(--text-main);
            margin-bottom: 1.5rem;
            box-shadow: none;
        }
        
        /* CYBER CARDS */
        [data-theme="cyber"] .card {
            clip-path: var(--card-clip-path);
        }
        
        /* GRAFFITI CARDS (Stickers) */
        [data-theme="graffiti"] .card {
            background: white; color: black;
            box-shadow: 4px 4px 10px rgba(0,0,0,0.5);
        }
        [data-theme="graffiti"] .card:nth-child(1) { transform: rotate(-2deg); background: #ff00ff; }
        [data-theme="graffiti"] .card:nth-child(2) { transform: rotate(1deg); background: #00ffff; }
        [data-theme="graffiti"] .card:nth-child(3) { transform: rotate(-3deg); background: #ffff00; }
        [data-theme="graffiti"] .card:nth-child(4) { transform: rotate(2deg); background: #00ff00; }
        [data-theme="graffiti"] .card:nth-child(5) { transform: rotate(-1deg); background: #ff9900; }
        [data-theme="graffiti"] .card:nth-child(6) { transform: rotate(3deg); background: #ffffff; }
        
        /* PAPER TAPE EFFECT */
        [data-theme="paper"] .card::before {
            content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%) rotate(-2deg);
            width: 60px; height: 25px; background: rgba(255, 255, 255, 0.6);
            border-left: 1px solid rgba(0,0,0,0.05); border-right: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            backdrop-filter: blur(2px); z-index: 5;
        }
        
        /* PAPER CUTOUTS & ANGLE VARIATION */
        /* We use a variable --paper-rot so we can preserve the angle on hover */
        [data-theme="paper"] .card:nth-child(1) { --paper-rot: -2deg; transform: rotate(var(--paper-rot)); border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px; }
        [data-theme="paper"] .card:nth-child(2) { --paper-rot: 1.5deg; transform: rotate(var(--paper-rot)); border-radius: 15px 225px 15px 255px / 255px 15px 225px 15px; }
        [data-theme="paper"] .card:nth-child(3) { --paper-rot: -1deg; transform: rotate(var(--paper-rot)); border-radius: 20px 255px 20px 225px / 255px 15px 225px 15px; }
        [data-theme="paper"] .card:nth-child(4) { --paper-rot: 2deg; transform: rotate(var(--paper-rot)); border-radius: 4px 25px 4px 25px / 25px 4px 25px 4px; }
        [data-theme="paper"] .card:nth-child(5) { --paper-rot: -2.5deg; transform: rotate(var(--paper-rot)); border-radius: 15px 225px 15px 255px / 255px 15px 25px 15px; }
        [data-theme="paper"] .card:nth-child(6) { --paper-rot: 1deg; transform: rotate(var(--paper-rot)); border-radius: 225px 15px 225px 15px / 15px 225px 15px 25px; }

        /* Maintain rotation on hover for Paper theme */
        [data-theme="paper"] .card:hover {
            transform: translate(2px, 2px) rotate(var(--paper-rot));
            z-index: 20;
        }

        /* ARCADE CARD HP BAR */
        .card-hp {
            display: none; position: absolute; top: -24px; left: 0; width: 100%; height: 16px;
            background: #050011; border: 2px solid #fff; padding: 2px; box-shadow: 0 0 5px #00E5FF;
        }
        [data-theme="arcade"] .card-hp { display: block; }
        
        .card-hp-fill {
            width: 100%; height: 100%; background: linear-gradient(90deg, #00FF00 0%, #00E5FF 100%);
            transition: width 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        /* DAMAGED STATE ANIMATION */
        @keyframes shake-red {
            0% { transform: translateX(0); border-color: #fff; background-color: var(--bg-card); box-shadow: var(--shadow-card); }
            10% { background-color: rgba(255, 0, 60, 0.6); box-shadow: inset 0 0 50px #FF003C, 0 0 30px #FF003C; border-color: #FF003C; }
            25% { transform: translateX(5px); background-color: rgba(255, 0, 60, 0.4); }
            50% { transform: translateX(-5px); background-color: rgba(255, 0, 60, 0.6); }
            75% { transform: translateX(5px); background-color: rgba(255, 0, 60, 0.2); }
            100% { transform: translateX(0); border-color: #fff; background-color: var(--bg-card); box-shadow: var(--shadow-card); }
        }
        [data-theme="arcade"] .card.hit { animation: shake-red 0.3s ease-in-out; }
        
        /* DESTROYED STATE */
        @keyframes explode-out {
            0% { transform: scale(1); opacity: 1; filter: blur(0); }
            50% { transform: scale(1.1); opacity: 0.8; filter: blur(2px) hue-rotate(90deg); }
            100% { transform: scale(0); opacity: 0; filter: blur(10px); }
        }
        [data-theme="arcade"] .card.destroyed { animation: explode-out 0.4s forwards; pointer-events: none; }
        
        @keyframes spawn-in {
            0% { transform: translateY(50px) scale(0); opacity: 0; filter: brightness(2); }
            100% { transform: translateY(0) scale(1); opacity: 1; filter: brightness(1); }
        }
        [data-theme="arcade"] .card.respawning { animation: spawn-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        
        /* PASTEL CARD STYLING */
        [data-theme="pastel"] .card { border: 12px solid #FFC8DD; background-color: #FFFFFF; position: relative; }
        [data-theme="pastel"] .card::after {
            content: ''; position: absolute; inset: 10px; border: 2px dashed #FFC8DD; border-radius: 16px; 
            pointer-events: none; background: none; box-shadow: none; z-index: 1;
        }
        [data-theme="pastel"] .card::before {
            content: ''; position: absolute; inset: 0; z-index: 2; pointer-events: none; display: block; 
            --doll-btn-svg: url('data:image/svg+xml;utf8,<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" fill="%23BDE0FE" stroke="%23A2D2FF" stroke-width="1"/><circle cx="8" cy="8" r="1.5" fill="white"/><circle cx="16" cy="8" r="1.5" fill="white"/><circle cx="8" cy="16" r="1.5" fill="white"/><circle cx="16" cy="16" r="1.5" fill="white"/><line x1="8" y1="8" x2="16" y2="16" stroke="white" stroke-width="2" stroke-linecap="round"/><line x1="16" y1="8" x2="8" y2="16" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>');
            background-image: var(--doll-btn-svg), var(--doll-btn-svg), var(--doll-btn-svg), var(--doll-btn-svg);
            background-size: 24px 24px; background-repeat: no-repeat;
            background-position: 12px 12px, calc(100% - 12px) 12px, 12px calc(100% - 12px), calc(100% - 12px) calc(100% - 12px); 
            filter: drop-shadow(0 2px 2px rgba(189, 224, 254, 0.8));
        }
        
        [data-theme="wireframe"] .card:hover { border-style: dotted; outline: 1px dashed var(--guide-color); outline-offset: 4px; background-color: rgba(0, 255, 255, 0.02); }
        [data-theme="wireframe"] .card:hover h3, [data-theme="wireframe"] .card:hover p, [data-theme="wireframe"] .card:hover .card-icon {
            outline: 1px dotted var(--guide-color); outline-offset: 2px; background: rgba(255, 0, 255, 0.03);
        }
        
        /* Vaporwave Card Chaos */
        [data-theme="vaporwave"] .card { flex: 0 0 auto; width: 300px; margin: -20px; position: relative; }
        [data-theme="vaporwave"] .card:nth-child(1) { transform: rotate(-3deg) translate(10px, 10px); }
        [data-theme="vaporwave"] .card:nth-child(2) { transform: rotate(2deg) translate(-10px, -5px); }
        [data-theme="vaporwave"] .card:nth-child(3) { transform: rotate(-1deg) translate(5px, 15px); }
        [data-theme="vaporwave"] .card:nth-child(4) { transform: rotate(4deg) translate(-5px, -10px); }
        [data-theme="vaporwave"] .card:nth-child(5) { transform: rotate(-2deg) translate(0px, 10px); }
        [data-theme="vaporwave"] .card:nth-child(6) { transform: rotate(1deg) translate(10px, -5px); }
        [data-theme="vaporwave"] .card:hover { z-index: 1000; transform: scale(1.1) rotate(0deg) !important; box-shadow: 0 0 30px #01CDFE, 0 0 60px rgba(255, 113, 206, 0.6); }

        [data-theme="graffiti"] .card:nth-child(even) { transform: rotate(2deg); margin-top: 20px; }
        [data-theme="graffiti"] .card:nth-child(odd) { transform: rotate(-1deg); }

        .card:hover { transform: var(--transform-hover); box-shadow: var(--shadow-hover); z-index: 10; }
        .card-icon { color: var(--text-main); margin-bottom: 0.5rem; }
        .card h3 {
            font-family: var(--font-display); font-size: 1.5rem; margin-bottom: 0.5rem;
            letter-spacing: var(--letter-spacing-title); text-transform: var(--text-transform-vapor);
            text-shadow: var(--text-shadow-chromatic);
        }
        .card p { font-size: 1rem; color: var(--text-muted); line-height: 1.6; }

        /* FOOTER STRIP */
        .footer-strip {
            padding-top: 2rem; font-size: 0.85rem; color: var(--text-muted);
            border-top: 1px solid transparent; display: flex; justify-content: space-between; width: 100%;
        }
        [data-theme="minimal"] .footer-strip { border-top-color: var(--border-color); }

        /* RULERS */
        .ruler-x, .ruler-y {
            position: fixed; background-color: rgba(240,240,240, 0.9); display: var(--ruler-display);
            z-index: 9999; pointer-events: none; overflow: hidden; font-family: monospace; font-size: 9px; color: #888;
        }
        .ruler-x {
            top: 0; left: 0; right: 0; height: 20px; border-bottom: 1px solid #ccc;
            background-image: linear-gradient(90deg, #ccc 1px, transparent 1px); background-size: 100% 10px;
        }
        .ruler-y {
            top: 0; left: 0; bottom: 0; width: 20px; border-right: 1px solid #ccc;
            background-image: linear-gradient(180deg, #ccc 1px, transparent 1px); background-size: 100% 10px;
        }
        .ruler-num { position: absolute; pointer-events: none; }

        /* WIDGET */
        .theme-widget {
            position: fixed; bottom: 24px; right: 24px; z-index: 1000;
            display: flex; flex-direction: column; align-items: flex-end; font-family: -apple-system, sans-serif;
        }
        .theme-panel {
            background-color: #ffffff; color: #111; padding: 16px; border-radius: 16px;
            box-shadow: 0 10px 40px -5px rgba(0,0,0,0.2); margin-bottom: 12px;
            display: grid; grid-template-columns: 1fr 1fr; gap: 8px; width: 240px;
            opacity: 0; transform: translateY(20px) scale(0.9); pointer-events: none;
            transition: all 0.3s; transform-origin: bottom right; border: 1px solid #e5e7eb;
        }
        .theme-widget.open .theme-panel { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
        .theme-btn {
            background: #f3f4f6; border: none; padding: 10px; border-radius: 8px; cursor: pointer;
            font-size: 0.8rem; font-weight: 600; color: #4b5563;
        }
        .theme-btn:hover { background: #e5e7eb; color: #111; }
        .theme-btn.active { background: #111827; color: #fff; }
        .toggle-btn {
            width: 56px; height: 56px; border-radius: 50%; background-color: #111827; color: white;
            border: none; cursor: pointer; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: transform 0.3s ease;
        }
        .toggle-btn:hover { transform: scale(1.1) rotate(90deg); }

        /* --- THEME SWITCH (Toggle Style) --- */
        .night-switch-container {
            /* Removed fixed positioning to align with header content */
            display: flex; align-items: center; gap: 12px;
            cursor: pointer; z-index: 100;
            padding: 8px 16px;
            background: var(--bg-card);
            border-radius: 50px;
            box-shadow: var(--shadow-card);
            border: var(--border-width) var(--border-style) var(--border-color);
            transition: all 0.3s ease;
        }
        
        .switch-track {
            width: 44px; height: 24px;
            background: #e5e7eb;
            border-radius: 99px;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .switch-thumb {
            width: 20px; height: 20px;
            background: #ffffff;
            border-radius: 50%;
            position: absolute; top: 2px; left: 2px;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .switch-icon {
            width: 20px; height: 20px;
            color: var(--text-main);
            transition: color 0.3s;
        }
        
        /* Lock Icon Logic */
        .lock-icon { display: none; } /* Hidden by default */

        /* Active State (Dark Mode Global) */
        html.dark-mode .switch-track {
            background: var(--text-main); /* Default active color */
        }
        html.dark-mode .switch-thumb {
            transform: translateX(20px);
        }

        /* --- THEME SPECIFIC SWITCH STYLES --- */
        /* TERMINAL THEME SWITCH */
        [data-theme="terminal"] .night-switch-container {
            background: #fff;
            border: 2px solid #000;
            border-radius: 0;
            box-shadow: 2px 2px 0 #000;
        }
        [data-theme="terminal"] .switch-track {
            background: #fff;
            border: 1px solid #000;
            border-radius: 0;
        }
        [data-theme="terminal"] .switch-thumb {
            background: #000;
            border-radius: 0;
            box-shadow: none;
            width: 16px; height: 16px; top: 3px; left: 3px;
        }
        html.dark-mode[data-theme="terminal"] .night-switch-container {
            background: #000;
            border-color: #00ff00;
            box-shadow: 0 0 5px #00ff00;
        }
        html.dark-mode[data-theme="terminal"] .switch-track {
            background: #003300;
            border-color: #00ff00;
        }
        html.dark-mode[data-theme="terminal"] .switch-thumb {
            background: #00ff00;
            box-shadow: 0 0 5px #00ff00;
        }

        /* GLASS THEME SWITCH */
        [data-theme="glass"] .night-switch-container {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        [data-theme="glass"] .switch-track {
            background: rgba(0, 0, 0, 0.1);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        [data-theme="glass"] .switch-thumb {
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            backdrop-filter: blur(4px);
        }
        /* Glass Dark Mode */
        html.dark-mode[data-theme="glass"] .switch-track {
            background: rgba(255, 255, 255, 0.2);
        }
        html.dark-mode[data-theme="glass"] .switch-thumb {
            background: #ffffff;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        /* PAPER THEME SWITCH */
        [data-theme="paper"] .night-switch-container {
            border-radius: 2px;
            border: 2px solid #2c3e50;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
            transform: rotate(1deg);
        }
        [data-theme="paper"] .switch-track {
            background: transparent;
            border: 2px solid #2c3e50;
            border-radius: 20px;
            height: 22px;
            width: 42px;
            box-shadow: none;
        }
        [data-theme="paper"] .switch-thumb {
            background: #2c3e50;
            border-radius: 50%;
            width: 14px; height: 14px;
            top: 2px; left: 2px;
            box-shadow: none;
            /* Sketchy scribble look */
            background-image: repeating-linear-gradient(45deg, transparent, transparent 2px, #fff 2px, #fff 3px);
        }
        html.dark-mode[data-theme="paper"] .switch-thumb {
            transform: translateX(20px);
            background: #ffffff; /* White chalk in dark mode */
            background-image: repeating-linear-gradient(45deg, transparent, transparent 2px, #2c3e50 2px, #2c3e50 3px);
        }
        html.dark-mode[data-theme="paper"] .switch-track {
            border-color: #ffffff;
            background: transparent;
        }

        /* ARCADE THEME SWITCH (LOCKED) */
        [data-theme="arcade"] .night-switch-container {
            border-radius: 0;
            border: 4px solid #fff;
            background: #000;
            box-shadow: none;
            cursor: not-allowed;
            opacity: 0.8;
        }
        [data-theme="arcade"] .switch-track {
            border-radius: 0;
            background: #333;
            width: 40px; height: 20px;
            box-shadow: inset 2px 2px 0 #000;
        }
        [data-theme="arcade"] .switch-thumb {
            border-radius: 0;
            width: 14px; height: 14px;
            top: 3px; left: 3px;
            background: #555; /* Greyed out thumb */
            box-shadow: inset -2px -2px 0 rgba(0,0,0,0.5);
        }
        /* Arcade Lock Icon Visibility */
        [data-theme="arcade"] #toggleIcon { display: none; }
        [data-theme="arcade"] .lock-icon { display: block; color: #555; }

        /* PASTEL THEME SWITCH */
        [data-theme="pastel"] .night-switch-container {
            border: 4px solid #FFC8DD;
            background: #FFF;
            border-radius: 20px;
        }
        [data-theme="pastel"] .switch-track {
            background: #BDE0FE;
            height: 26px;
        }
        [data-theme="pastel"] .switch-thumb {
            background: #FFF;
            width: 20px; height: 20px;
            top: 3px; left: 3px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }
        html.dark-mode[data-theme="pastel"] .switch-track {
            background: #f48fb1; /* Pink in Kurumi mode */
        }
        html.dark-mode[data-theme="pastel"] .night-switch-container {
            border-color: #4a148c; /* Purple border */
            background: #2a1f33;
        }

        /* VAPORWAVE THEME SWITCH (LOCKED) */
        [data-theme="vaporwave"] .night-switch-container {
            border: 2px solid #01CDFE;
            border-radius: 0;
            background: rgba(0,0,0,0.5);
            box-shadow: 4px 4px 0 #FF71CE;
            cursor: not-allowed;
            opacity: 0.8;
        }
        [data-theme="vaporwave"] .switch-track {
            border-radius: 0;
            background: transparent;
            border: 1px solid #FF71CE;
        }
        [data-theme="vaporwave"] .switch-thumb {
            border-radius: 0;
            background: #555; /* Dimmed */
            box-shadow: none;
        }
        /* Vaporwave Lock Icon Visibility */
        [data-theme="vaporwave"] #toggleIcon { display: none; }
        [data-theme="vaporwave"] .lock-icon { display: block; color: #FF71CE; }
        
        /* WIREFRAME & CYBER */
        [data-theme="wireframe"] .night-switch-container, [data-theme="cyber"] .night-switch-container {
            border-radius: 0;
            background: transparent;
        }
        [data-theme="wireframe"] .switch-track {
            border-radius: 0;
            border: 1px solid currentColor;
            background: transparent !important;
        }
        [data-theme="wireframe"] .switch-thumb {
            border-radius: 0;
            background: currentColor;
            box-shadow: none;
            width: 14px; height: 14px;
            top: 4px; left: 4px;
        }
        
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            /* General Layout */
            .container { padding: 1rem; }
            h1 { font-size: 2.5rem; }
            p.lead { margin-left: auto; margin-right: auto; font-size: 1rem; }
            .hero-section { text-align: center; padding: 2rem 1rem; margin-bottom: 3rem; }
            
            /* Remove manual positioning on mobile since it's now in the flow */
            .night-switch-container {
                /* Resetting just in case specific overrides existed */
                margin-left: auto; 
            }
            
            /* Force single column for all grids */
            .features-grid { grid-template-columns: 1fr; gap: 1.5rem; }
            
            /* Full width buttons for easier tapping */
            .btn { width: 100%; text-align: center; display: block; box-sizing: border-box; }

            /* --- Theme Specific Fixes --- */

            /* VAPORWAVE: Reset chaos layout */
            [data-theme="vaporwave"] .card { 
                width: 100%; 
                margin: 0; 
                transform: none !important; 
            } 
            
            /* Allow vapor text styling on mobile */
            .vapor-text-vert {
                display: block;
                left: 5px;
                font-size: 1.2rem;
                letter-spacing: 0.2em;
                /* Removed global opacity setting that was causing the bug */
            }

            /* Only show (and dim) the text when Vaporwave theme is active on mobile */
            [data-theme="vaporwave"] .vapor-text-vert {
                opacity: 0.6;
            }
            
            .hero-section::before, .hero-section::after { width: 300px; height: 300px; opacity: 0.3; }

            /* PAPER: Tame the pencil and sticky note */
            [data-theme="paper"] .pencil-asset {
                width: 80px; /* Much smaller */
                bottom: 20px;
                right: 10px;
                transform: rotate(-10deg);
            }
            [data-theme="paper"] #hero-span {
                transform: rotate(-2deg) translateY(0); 
                margin-left: 0;
                margin-top: 5px;
                display: inline-block;
                font-size: 0.9em;
            }
            /* Adjust background lines for mobile density */
            [data-theme="paper"] {
                --bg-layer-color: 
                    linear-gradient(90deg, transparent 20px, #ff8a80 20px, #ff8a80 22px, transparent 22px),
                    repeating-linear-gradient(to bottom, #fdfbf7, #fdfbf7 29px, #badcf5 30px);
            }

            /* GLASS: Shrink bubbles significantly */
            [data-theme="glass"] .glass-orb {
                transform: scale(0.3); /* 30% size */
                opacity: 0.5;
                filter: none; /* Improve mobile performance */
            }
            /* Center the big blobs so they are background ambience, not blocking */
            [data-theme="glass"] .orb-1, [data-theme="glass"] .orb-2 {
                left: 50%; top: 50%;
                margin-left: -150px; margin-top: -150px;
            }
            [data-theme="glass"] .hero-section {
                padding: 2rem;
                backdrop-filter: blur(20px); /* Lighter blur for mobile perfo */
                -webkit-backdrop-filter: blur(20px);
            }

            /* ARCADE: Fix HUD elements */
            .arcade-score-bar {
                font-size: 0.6rem;
                gap: 10px;
                flex-direction: column;
                top: 10px;
                width: 100%;
                text-align: center;
            }
            .arcade-hp-bar {
                width: 100%;
                max-width: none;
                margin-bottom: 1rem;
            }
            
            /* WIREFRAME: Hide rulers on mobile to save space */
            .ruler-x, .ruler-y { display: none; }

            /* PASTEL: Fix mobile centering and size */
            [data-theme="pastel"] .hero-section {
                text-align: center; 
                display: flex; 
                flex-direction: column;
                align-items: center; 
                margin-bottom: 1rem;
            }
            [data-theme="pastel"] h1 { 
                font-size: 3.5rem; /* Much smaller for mobile */
                margin-left: auto; 
                margin-right: auto; 
                width: 100%;
            }
            [data-theme="pastel"] #hero-span {
                margin-left: 0; /* Remove desktop offset */
                display: inline-block;
                margin-top: 10px;
                transform: rotate(-3deg);
            }
        }
    </style>
</head>
<body>

    <!-- LAYER: BACKGROUND -->
    <div class="bg-layer"></div>
    <div class="paper-texture"></div>
    
    <!-- LAYER: GRID FLOOR -->
    <div class="grid-floor"></div>

    <!-- LAYER: VHS OVERLAY -->
    <div class="vhs-overlay"></div>
    
    <!-- LAYER: RULERS -->
    <div class="ruler-x" id="rulerX"></div>
    <div class="ruler-y" id="rulerY"></div>

    <!-- LAYER: TERMINAL MATRIX -->
    <canvas id="matrixCanvas" class="terminal-asset"></canvas>

    <!-- REMOVED FIXED SWITCH FROM HERE -->

    <!-- LAYER: VAPORWAVE ASSETS -->
    <div class="vapor-asset vapor-text-vert">
        リサフランク420<br>
        現代のコンピュー
    </div>
    
    <!-- GLASS ASSETS: BUBBLES -->
    <div class="glass-asset glass-orb orb-1"></div>
    <div class="glass-asset glass-orb orb-2"></div>
    <div class="glass-asset glass-orb orb-3"></div>
    <div class="glass-asset glass-orb orb-4"></div>
    <div class="glass-asset glass-orb orb-5"></div>
    <div class="glass-asset glass-orb orb-6"></div>
    <!-- NEW ORBS -->
    <div class="glass-asset glass-orb orb-7"></div>
    <div class="glass-asset glass-orb orb-8"></div>
    <div class="glass-asset glass-orb orb-9"></div>
    <div class="glass-asset glass-orb orb-10"></div>
    <div class="glass-asset glass-orb orb-11"></div>
    <div class="glass-asset glass-orb orb-12"></div>
    
    <!-- PAPER ASSETS -->
    <!-- REPLACED: Realistic Matte Pencil (Thinner, Longer, Short Eraser) -->
    <svg class="paper-asset pencil-asset" viewBox="0 0 100 400" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
        <defs>
            <!-- Matte Yellow Paint Gradient (No sharp highlights) -->
            <linearGradient id="pencilBodyGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#EF6C00" /> <!-- Dark Edge -->
                <stop offset="20%" stop-color="#FFB300" />
                <stop offset="50%" stop-color="#FFCA28" /> <!-- Soft Center -->
                <stop offset="80%" stop-color="#FFB300" />
                <stop offset="100%" stop-color="#EF6C00" /> <!-- Dark Edge -->
            </linearGradient>
            
            <!-- Matte Aluminum Ferrule -->
            <linearGradient id="ferruleGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#546E7A" />
                <stop offset="30%" stop-color="#90A4AE" />
                <stop offset="50%" stop-color="#B0BEC5" /> <!-- Matte Grey -->
                <stop offset="70%" stop-color="#90A4AE" />
                <stop offset="100%" stop-color="#455A64" />
            </linearGradient>
            
            <!-- Matte Eraser -->
            <linearGradient id="eraserGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#C2185B" />
                <stop offset="50%" stop-color="#F48FB1" />
                <stop offset="100%" stop-color="#AD1457" />
            </linearGradient>
            
            <!-- Raw Wood Gradient -->
            <linearGradient id="woodGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#8D6E63" />
                <stop offset="50%" stop-color="#D7CCC8" />
                <stop offset="100%" stop-color="#6D4C41" />
            </linearGradient>
        </defs>

        <!-- Eraser (Shortened) -->
        <path d="M 42 40 L 42 25 C 42 20 58 20 58 25 L 58 40 Z" fill="url(#eraserGrad)" />
        
        <!-- Ferrule (Metal) -->
        <rect x="42" y="40" width="16" height="15" fill="url(#ferruleGrad)" />
        <!-- Ferrule Ridges -->
        <line x1="42" y1="44" x2="58" y2="44" stroke="rgba(0,0,0,0.2)" stroke-width="0.5" />
        <line x1="42" y1="48" x2="58" y2="48" stroke="rgba(0,0,0,0.2)" stroke-width="0.5" />
        <line x1="42" y1="52" x2="58" y2="52" stroke="rgba(0,0,0,0.2)" stroke-width="0.5" />

        <!-- Pencil Body (Lengthened) -->
        <rect x="42" y="55" width="16" height="260" fill="url(#pencilBodyGrad)" />
        
        <!-- Tip (Wood Cone) -->
        <path d="M 42 315 L 50 350 L 58 315" fill="url(#woodGrad)" />
        <!-- Scalloped Paint Edge -->
        <path d="M 42 315 Q 46 320 50 315 Q 54 320 58 315" fill="url(#pencilBodyGrad)" />

        <!-- Graphite Point -->
        <path d="M 48 342 L 50 350 L 52 342" fill="#333" />
    </svg>
    
    <!-- GRAFFITI ASSETS -->
    <svg class="graffiti-asset graffiti-drip" viewBox="0 0 100 100" preserveAspectRatio="none">
        <path d="M0,0 L100,0 L100,20 Q90,50 80,20 Q70,60 60,30 Q50,80 40,30 Q30,60 20,20 Q10,50 0,20 Z" fill="#FFFF00" />
    </svg>
    <div class="graffiti-asset graffiti-tag" style="font-family: 'Permanent Marker'; color: white; font-size: 4rem; position: fixed;">
        STYLE!
    </div>
    
    <!-- PASTEL ASSETS -->
    <div class="pastel-asset blob blob-1"></div>
    <div class="pastel-asset blob blob-2"></div>
    <div class="pastel-asset blob blob-3"></div>
    
    <svg class="pastel-asset sparkle sparkle-1" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    <svg class="pastel-asset sparkle sparkle-2" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    <svg class="pastel-asset sparkle sparkle-3" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    <svg class="pastel-asset sparkle sparkle-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    <svg class="pastel-asset sparkle sparkle-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    <svg class="pastel-asset sparkle sparkle-6" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    <svg class="pastel-asset sparkle sparkle-7" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    <svg class="pastel-asset sparkle sparkle-8" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    <svg class="pastel-asset sparkle sparkle-9" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0L14 10L24 12L14 14L12 24L10 14L0 12L10 10Z" /></svg>
    
    <!-- ARCADE ASSETS -->
    <div class="arcade-asset arcade-star as-1"></div>
    <div class="arcade-asset arcade-star as-2"></div>
    <div class="arcade-asset arcade-star as-3"></div>
    <div class="arcade-asset arcade-star as-4"></div>
    <div class="arcade-asset arcade-star as-5"></div>
    
    <div class="arcade-asset arcade-score-bar">
        <span><svg viewBox="0 0 24 24" width="16" height="16" fill="red" style="vertical-align: middle;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg> x 3</span>
        <span>HIGH SCORE <span class="score-val" id="high-score">000000</span></span>
    </div>

    <div class="container">
        <!-- HEADER -->
        <header>
            <div class="logo">NullMorphUI.</div>
            <!-- NIGHT MODE SWITCH MOVED HERE -->
            <div class="night-switch-container" onclick="toggleNightMode()">
                <i data-lucide="moon" id="toggleIcon" class="switch-icon"></i>
                <i data-lucide="lock" id="lockIcon" class="switch-icon lock-icon"></i>
                <div class="switch-track">
                    <div class="switch-thumb"></div>
                </div>
            </div>
        </header>

        <!-- HERO -->
        <section class="hero-section">
            <!-- ARCADE HP BAR -->
            <div class="arcade-asset arcade-hp-bar">
                <span>P1</span>
                <div class="hp-container">
                    <div class="hp-fill"></div>
                </div>
            </div>

            <h1 id="hero-title"><span class="hero-text-upper">Design that</span> <br><span id="hero-span" style="color: var(--text-muted)">Moves.</span></h1>
            <p class="lead" id="hero-lead">
                I don't just change colors. I restructure geometry, typography, and depth. 
                Use the widget in the bottom right corner to test my CSS architecture.
            </p>
            
            <!-- ADD BUTTON HERE -->
            <div style="margin-top: 0;">
                <a href="https://nullifiedblank.github.io/NullPortfolio/" target="_blank" class="btn hero-btn">View My Portfolio</a>
            </div>
        </section>

        <!-- FEATURES -->
        <section class="features-grid">
            <div class="card" id="card-1">
                <div class="card-hp"><div class="card-hp-fill"></div></div>
                <i data-lucide="layers" class="card-icon" size="32"></i>
                <h3>Atomic CSS</h3>
                <p>Built using semantic variables for radius, shadows, and spacing. No hardcoded values.</p>
            </div>
            <div class="card" id="card-2">
                <div class="card-hp"><div class="card-hp-fill"></div></div>
                <i data-lucide="zap" class="card-icon" size="32"></i>
                <h3>Layout Morph</h3>
                <p>Watch how the grid gap, alignment, and rotation change physically.</p>
            </div>
            <div class="card" id="card-3">
                <div class="card-hp"><div class="card-hp-fill"></div></div>
                <i data-lucide="type" class="card-icon" size="32"></i>
                <h3>Typography</h3>
                <p>Fonts update dynamically, importing from Google Fonts to match the vibe.</p>
            </div>
            <div class="card" id="card-4">
                <div class="card-hp"><div class="card-hp-fill"></div></div>
                <i data-lucide="cpu" class="card-icon" size="32"></i>
                <h3>Performance</h3>
                <p>Zero JavaScript animations. Everything is handled by CSS transitions.</p>
            </div>
            <div class="card" id="card-5">
                <div class="card-hp"><div class="card-hp-fill"></div></div>
                <i data-lucide="palette" class="card-icon" size="32"></i>
                <h3>Theming</h3>
                <p>Supports infinite themes by simply swapping the data-theme attribute.</p>
            </div>
            <div class="card" id="card-6">
                <div class="card-hp"><div class="card-hp-fill"></div></div>
                <i data-lucide="code" class="card-icon" size="32"></i>
                <h3>Clean Code</h3>
                <p>Single file, readable structure, no build steps required.</p>
            </div>
        </section>

        <!-- FOOTER -->
        <div class="footer-strip">
            <span>© 2025 NullifiedBlank</span>
            <span>Abstracting the UI layer from the Content layer.</span>
        </div>
    </div>

    <!-- WIDGET -->
    <div class="theme-widget" id="themeWidget">
        <div class="theme-panel">
            <div style="grid-column: span 2; font-size: 0.75rem; color: #888; margin-bottom: 8px; font-weight: 700;">SELECT STYLE</div>
            <button class="theme-btn active" onclick="setTheme('minimal')">Minimal</button>
            <button class="theme-btn" onclick="setTheme('pastel')">Pastel</button>
            <button class="theme-btn" onclick="setTheme('vaporwave')">Vaporwave</button>
            <button class="theme-btn" onclick="setTheme('arcade')">Arcade</button>
            <button class="theme-btn" onclick="setTheme('paper')">Paper</button>
            <button class="theme-btn" onclick="setTheme('glass')">Glass</button>
            <button class="theme-btn" onclick="setTheme('terminal')">Terminal</button>
            <button class="theme-btn" onclick="setTheme('wireframe')">Wireframe</button>
        </div>
        <button class="toggle-btn" onclick="toggleWidget()">
            <i data-lucide="palette" size="24"></i>
        </button>
    </div>

    <script>
        lucide.createIcons();

        const widget = document.getElementById('themeWidget');
        const buttons = document.querySelectorAll('.theme-btn');
        const heroTitle = document.getElementById('hero-title');
        const heroSpan = document.getElementById('hero-span');
        const heroLead = document.getElementById('hero-lead');
        const highScoreEl = document.getElementById('high-score');
        
        let score = 0;
        let cardHealth = {};
        
        // --- MATRIX RAIN ANIMATION ---
        let matrixInterval;
        const matrixCanvas = document.getElementById('matrixCanvas');
        const matrixCtx = matrixCanvas.getContext('2d');

        function startMatrix() {
            // Setup full screen canvas
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
            
            const fontSize = 16;
            const columns = matrixCanvas.width / fontSize;
            const drops = [];
            
            // Initial drops
            for (let i = 0; i < columns; i++) {
                drops[i] = 1;
            }
            
            // Chars (Binary)
            const chars = "01";
            
            if (matrixInterval) clearInterval(matrixInterval);
            
            matrixInterval = setInterval(() => {
                // Fade out trail
                matrixCtx.fillStyle = "rgba(0, 0, 0, 0.05)";
                matrixCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
                
                matrixCtx.fillStyle = "#0F0"; // Green text
                matrixCtx.font = fontSize + "px 'VT323', monospace";
                
                for (let i = 0; i < drops.length; i++) {
                    const text = chars.charAt(Math.floor(Math.random() * chars.length));
                    matrixCtx.fillText(text, i * fontSize, drops[i] * fontSize);
                    
                    if (drops[i] * fontSize > matrixCanvas.height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
            }, 50);
        }

        function stopMatrix() {
            clearInterval(matrixInterval);
            matrixCtx.clearRect(0, 0, matrixCanvas.width, matrixCanvas.height);
        }

        // --- NIGHT MODE LOGIC ---
        
        // 1. Toggle Function (User Click)
        function toggleNightMode() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            // Prevent toggle for locked themes
            if (currentTheme === 'vaporwave' || currentTheme === 'arcade') return;

            // Flip the state
            document.documentElement.classList.toggle('dark-mode');
            
            // Update UI to match new state
            updateIconState();
        }

        // 2. UI Sync Function (Called by Toggle AND setTheme)
        function updateIconState() {
            const isDark = document.documentElement.classList.contains('dark-mode');
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const toggleIcon = document.getElementById('toggleIcon');
            const lockIcon = document.getElementById('lockIcon');

            // Handle Terminal Matrix Logic
            if (currentTheme === 'terminal') {
                if (isDark) startMatrix();
                else stopMatrix();
            }

            // Handle Lock vs Toggle Visibility
            if (currentTheme === 'vaporwave' || currentTheme === 'arcade') {
                lockIcon.style.display = 'block';
                if(toggleIcon) toggleIcon.style.display = 'none';
            } else {
                lockIcon.style.display = 'none';
                
                // Re-render the correct icon (Sun or Moon)
                // We use outerHTML replacement to ensure Lucide can re-process the raw <i> tag
                if (toggleIcon) {
                    const iconName = isDark ? 'sun' : 'moon';
                    toggleIcon.outerHTML = `<i data-lucide="${iconName}" id="toggleIcon" class="switch-icon"></i>`;
                    lucide.createIcons();
                }
            }
        }

        const cards = document.querySelectorAll('.card');
        
        cards.forEach((card, index) => {
            const cardId = 'card-' + (index + 1);
            card.id = cardId; 
            
            card.addEventListener('click', () => {
                if (document.documentElement.getAttribute('data-theme') !== 'arcade') return;
                
                if (cardHealth[cardId] === undefined) cardHealth[cardId] = 100;
                
                if (cardHealth[cardId] > 0) {
                    cardHealth[cardId] -= 34; 
                    
                    const bar = card.querySelector('.card-hp-fill');
                    if (bar) bar.style.width = Math.max(0, cardHealth[cardId]) + '%';
                    
                    card.classList.remove('hit');
                    void card.offsetWidth; 
                    card.classList.add('hit');
                    
                    if (cardHealth[cardId] <= 0) {
                        createPixelExplosion(card.getBoundingClientRect());
                        
                        setTimeout(() => {
                            card.classList.add('destroyed');
                            setTimeout(() => {
                                respawnCard(card, cardId);
                            }, 2000);
                        }, 200); 
                    }
                }
            });
        });
        
        function createPixelExplosion(rect) {
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.classList.add('pixel-particle');
                
                const colors = ['#FF003C', '#FAFF00', '#00E5FF', '#FFFFFF'];
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                const tx = (Math.random() - 0.5) * 300 + 'px';
                const ty = (Math.random() - 0.5) * 300 + 'px';
                particle.style.setProperty('--tx', tx);
                particle.style.setProperty('--ty', ty);
                
                particle.style.left = centerX + 'px';
                particle.style.top = centerY + 'px';
                
                document.body.appendChild(particle);
                
                setTimeout(() => {
                    particle.remove();
                }, 600);
            }
        }
        
        function respawnCard(card, id) {
            cardHealth[id] = 100;
            const bar = card.querySelector('.card-hp-fill');
            if (bar) bar.style.width = '100%';
            
            card.classList.remove('destroyed');
            card.classList.remove('hit');
            
            card.classList.add('respawning');
            setTimeout(() => {
                card.classList.remove('respawning');
            }, 600);
        }

        const originalText = {
            title: 'Design that ',
            span: 'Moves.',
            lead: "I don't just change colors. I restructure geometry, typography, and depth. Use the widget in the bottom right corner to test my CSS architecture."
        };
        
        const jpText = {
            title: 'デザインが ',
            span: '動く。',
            lead: "色を変えるだけじゃない。幾何学、タイポグラフィ、奥行きを再構築する。"
        };
        
        const chars = "アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン1234567890";
        
        let interval = null;
        let glitchTimeout1 = null; 
        let glitchTimeout2 = null; 
        let arcadeInterval = null; 

        // Ruler Generation
        const rulerX = document.getElementById('rulerX');
        const rulerY = document.getElementById('rulerY');
        
        for(let i=0; i<=2000; i+=100) {
            const num = document.createElement('div');
            num.className = 'ruler-num';
            num.innerText = i;
            num.style.left = i + 'px';
            num.style.top = '2px';
            rulerX.appendChild(num);
        }
        
        for(let i=0; i<=1500; i+=100) {
            const num = document.createElement('div');
            num.className = 'ruler-num';
            num.innerText = i;
            num.style.top = i + 'px';
            num.style.left = '2px';
            num.style.transform = 'rotate(-90deg)';
            num.style.transformOrigin = 'top left';
            num.style.marginTop = '15px'; 
            rulerY.appendChild(num);
        }
        
        // ARCADE SCORE LOGIC
        document.addEventListener('mousemove', () => {
            if (document.documentElement.getAttribute('data-theme') === 'arcade') {
                score += Math.floor(Math.random() * 50) + 10; 
                if(highScoreEl) {
                    highScoreEl.innerText = score.toString().padStart(6, '0');
                }
            }
        });

        function toggleWidget() { widget.classList.toggle('open'); }

        function setTheme(themeName) {
            clearAllGlitchTimers();
            stopMatrix(); // Stop matrix if switching away from dark terminal (will restart in updateIconState if needed)
            
            // Reset Score for Arcade
            if (themeName === 'arcade') {
                score = 0;
                if(highScoreEl) highScoreEl.innerText = "000000";
                
                cards.forEach(card => {
                    const id = card.id;
                    cardHealth[id] = 100;
                    const bar = card.querySelector('.card-hp-fill');
                    if(bar) bar.style.width = '100%';
                    card.classList.remove('destroyed', 'hit', 'respawning');
                });
            }

            document.documentElement.setAttribute('data-theme', themeName);
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (themeName === 'vaporwave') {
                startGlitchEffect();
            } else if (themeName === 'arcade') {
                startArcadeEffect();
            } else {
                resetText();
            }
            
            // CRITICAL FIX: Ensure UI reflects current state without toggling it
            updateIconState();
        }
        
        function clearAllGlitchTimers() {
            clearInterval(interval);
            clearTimeout(glitchTimeout1);
            clearTimeout(glitchTimeout2);
            clearTimeout(arcadeInterval); 
        }
        
        function startGlitchEffect() {
            let iteration = 0;
            heroTitle.innerHTML = jpText.title + '<br><span style="color: var(--text-muted)" id="hero-span">' + jpText.span + '</span>';
            heroLead.innerText = jpText.lead;
            
            glitchTimeout1 = setTimeout(() => {
                const targetTitle = "Design that ";
                interval = setInterval(() => {
                    heroTitle.firstChild.textContent = targetTitle
                        .split("")
                        .map((letter, index) => {
                            if(index < iteration) return letter;
                            return chars[Math.floor(Math.random() * chars.length)];
                        })
                        .join("");
                    const spanEl = document.getElementById('hero-span');
                    if(spanEl) {
                        spanEl.innerText = "Moves.";
                    }
                    if(iteration >= targetTitle.length) { 
                        clearInterval(interval);
                        if(document.documentElement.getAttribute('data-theme') === 'vaporwave') {
                             heroTitle.innerHTML = '<span class="hero-text-upper">' + originalText.title + '</span><br><span style="color: var(--text-muted)" id="hero-span">' + originalText.span + '</span>';
                        }
                    }
                    iteration += 1 / 3;
                }, 30);
                glitchTimeout2 = setTimeout(() => { 
                    if(document.documentElement.getAttribute('data-theme') === 'vaporwave') {
                        heroLead.innerText = originalText.lead; 
                    }
                }, 500);
            }, 1000);
        }

        function startArcadeEffect() {
            heroTitle.innerHTML = '<span class="hero-text-upper">Design that</span> <br><span style="color: var(--text-muted)" id="hero-span"></span>';
            heroLead.innerText = originalText.lead; 
            
            const steps = [
                { text: "M", delay: 300 },
                { text: "Mo", delay: 300 },
                { text: "Mov", delay: 300 },
                { text: "Movz", delay: 400 }, 
                { text: "Mov", delay: 500 },  
                { text: "Move", delay: 300 },
                { text: "Moves", delay: 300 },
                { text: "Moves", delay: 0, done: true } 
            ];

            let stepIndex = 0;

            function runStep() {
                if (stepIndex >= steps.length) return;

                const step = steps[stepIndex];
                const spanEl = document.getElementById('hero-span'); 
                if (spanEl) {
                    if (step.done) {
                        spanEl.innerHTML = step.text + '<span class="arcade-cursor">_</span>';
                        return;
                    }
                    spanEl.innerText = step.text + "_"; 
                }
                
                stepIndex++;
                if (stepIndex < steps.length) {
                    arcadeInterval = setTimeout(runStep, steps[stepIndex].delay);
                }
            }
            
            runStep();
        }

        function resetText() {
            clearAllGlitchTimers();
            heroTitle.innerHTML = '<span class="hero-text-upper">' + originalText.title + '</span><br><span style="color: var(--text-muted)" id="hero-span">' + originalText.span + '</span>';
            heroLead.innerText = originalText.lead;
        }

        document.addEventListener('click', (e) => {
            if (!widget.contains(e.target)) widget.classList.remove('open');
        });
        
        // Window Resize for Matrix
        window.addEventListener('resize', () => {
            if (document.documentElement.getAttribute('data-theme') === 'terminal' && document.documentElement.classList.contains('dark-mode')) {
                startMatrix(); // Restart to fix dimensions
            }
        });
        
        // Initialize Icon State
        updateIconState();
    </script>
</body>
</html>